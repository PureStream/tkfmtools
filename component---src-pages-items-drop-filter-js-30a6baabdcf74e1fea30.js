(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/0XM":function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return w}));var r=n("q1tI"),a=n.n(r),o=n("vOnD"),i=n("wx14"),l=n("zLVn"),c=n("TSYQ"),u=n.n(c),s=n("cWnB"),d=function(){},m=a.a.forwardRef((function(e,t){var n=e.children,o=e.name,c=e.className,m=e.checked,f=e.type,g=e.onChange,p=e.value,h=e.disabled,b=e.inputRef,y=Object(l.a)(e,["children","name","className","checked","type","onChange","value","disabled","inputRef"]),v=Object(r.useState)(!1),C=v[0],k=v[1],E=Object(r.useCallback)((function(e){"INPUT"===e.target.tagName&&k(!0)}),[]),O=Object(r.useCallback)((function(e){"INPUT"===e.target.tagName&&k(!1)}),[]);return a.a.createElement(s.a,Object(i.a)({},y,{ref:t,className:u()(c,C&&"focus",h&&"disabled"),type:void 0,active:!!m,as:"label"}),a.a.createElement("input",{name:o,type:f,value:p,ref:b,autoComplete:"off",checked:!!m,disabled:!!h,onFocus:E,onBlur:O,onChange:g||d}),n)}));m.displayName="ToggleButton";var f=m,g=n("QLaP"),p=n.n(g),h=n("y8DL"),b=n("Qg85");var y=n("vUet"),v=a.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.size,o=e.toggle,c=e.vertical,s=e.className,d=e.as,m=void 0===d?"div":d,f=Object(l.a)(e,["bsPrefix","size","toggle","vertical","className","as"]),g=Object(y.a)(n,"btn-group"),p=g;return c&&(p=g+"-vertical"),a.a.createElement(m,Object(i.a)({},f,{ref:t,className:u()(s,p,r&&g+"-"+r,o&&g+"-toggle")}))}));v.displayName="ButtonGroup",v.defaultProps={vertical:!1,toggle:!1,role:"group"};var C=v,k=a.a.forwardRef((function(e,t){var n=Object(h.a)(e,{value:"onChange"}),r=n.children,o=n.type,c=n.name,u=n.value,s=n.onChange,d=Object(l.a)(n,["children","type","name","value","onChange"]),m=function(){return null==u?[]:[].concat(u)};return"radio"!==o||c||p()(!1),a.a.createElement(C,Object(i.a)({},d,{ref:t,toggle:!0}),function(e,t){var n=0;return a.a.Children.map(e,(function(e){return a.a.isValidElement(e)?t(e,n++):e}))}(r,(function(e){var t=m(),n=e.props,r=n.value,i=n.onChange;return a.a.cloneElement(e,{type:o,name:e.name||c,checked:-1!==t.indexOf(r),onChange:Object(b.a)(i,(function(e){return function(e,t){if(s){var n=m(),r=-1!==n.indexOf(e);"radio"!==o?s(r?n.filter((function(t){return t!==e})):[].concat(n,[e]),t):!r&&s&&s(e,t)}}(r,e)}))})})))}));k.defaultProps={type:"radio",vertical:!1},k.Button=f;var E=k,O=Object(o.b)(f).withConfig({displayName:"MyToggleButtonGroup__StyledToggleButton",componentId:"xb0kbi-0"})(["&&&&{padding:.15rem .15rem;border-radius:.25rem;border:1px solid ",";background-color:",";color:",";white-space:break-spaces;user-select:none;&:hover{border:1px solid ",";box-shadow:inset 0 0 .5rem ",",0 0 .1rem ",";}&.active{background-color:",";color:",";}&.focus{box-shadow:none;}}"],(function(e){return e.theme.colors.secondaryBorder}),(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.onSurface}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.onSecondary})),j=function(e){var t=e.className,n=e.children,r=e.type,o=e.checked,i=e.onChange,l=e.value;return a.a.createElement(O,{className:t,type:r,value:l,checked:o,onChange:i},n)},I=Object(o.b)(E).withConfig({displayName:"MyToggleButtonGroup__StyledToggleButtonGroup",componentId:"xb0kbi-1"})(["display:grid;gap:.5rem;",""],(function(e){return Object.entries(e.$layoutConfig).map((function(e){return"@media screen and (min-width: "+e[0]+"px) {\n            grid-template-columns: repeat("+e[1]+", 1fr);\n        }\n        "}))}));function w(e){var t=e.children,n=e.className,r=e.type,o=e.value,i=e.onChange,l=e.layoutConfig;return a.a.createElement(I,{type:r,value:o,onChange:i,$layoutConfig:l,className:n},t)}},exLy:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),o=n("k2JI"),i=n("zLVn"),l=n("vOnD"),c=n("JrlI"),u=n("/0XM"),s=n("9M6+"),d=n("lbun"),m=n("6j+L"),f=n("D7KU"),g=n("ckOl"),p=l.b.div.withConfig({displayName:"ItemFilter__ClearIconWrapper",componentId:"kd23d5-0"})(["cursor:pointer;svg{width:1.2rem;height:1.2rem;}"]),h=Object(l.b)(u.a).withConfig({displayName:"ItemFilter__StyledToggleButton",componentId:"kd23d5-1"})(["display:flex;justify-content:center;align-items:center;font-size:.85rem;"]),b=Object(l.b)(s.a).withConfig({displayName:"ItemFilter__ItemImg",componentId:"kd23d5-2"})(["width:2.26rem;height:2.26rem;"]),y=function(e){var t=Object(r.useContext)(f.a),n=t.userLanguage,o=t.pageString,i=t.itemString,l="en"===n?{1360:4,992:3,768:4,624:3,0:2}:{1360:5,992:4,768:5,624:4,410:3,0:2};return a.a.createElement(c.b,{widthConfig:{default:"60%",1360:"62%",992:"100%"}},a.a.createElement(c.a,{title:o.items.drop.filter.itemPanelTitle,end:a.a.createElement(p,{onClick:function(){return e.filterBy([])}},g.g)}),a.a.createElement(u.b,{type:"checkbox",value:e.filterBtnValue,onChange:e.filterBy,layoutConfig:l},Object.entries(d.a).map((function(e,t){return 0===e[1].drop.length||a.a.createElement(h,{value:e[0],key:t},a.a.createElement(b,{name:"item_"+e[0]+".png",isBackground:!1,alt:""}),i.name[e[0]])}))))},v=Object(l.b)(c.g).withConfig({displayName:"ItemFilter__ImgTh",componentId:"kd23d5-3"})(["&:after{position:absolute;top:calc(50% - .75rem);margin-left:2rem;}"]),C=Object(l.b)(s.a).withConfig({displayName:"ItemFilter__TableImg",componentId:"kd23d5-4"})(["width:1.8rem;height:1.8rem;"]),k=function(e){var t=Object(r.useContext)(f.a),n=t.pageString,o=t.itemString,i=function(){return 0===e.sortedResult.length?a.a.createElement(c.g,null,n.items.drop.filter.tableHead[1]):Object.entries(e.sortedResult[0]).map((function(t,n){if("stage"!==t[0]&&"energy"!==t[0])return a.a.createElement(v,{key:n,onClick:function(){return e.requestSort(t[0])},direction:e.getSortDirection(t[0])},a.a.createElement(C,{name:"item_"+t[0]+".png",isBackground:!1,alt:o.name[t[0]]}))}))};return a.a.createElement(a.a.Fragment,null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement(c.g,{onClick:function(){return e.requestSort("stage")},direction:e.getSortDirection("stage")},n.items.drop.filter.tableHead[0]),a.a.createElement(i,null),a.a.createElement(v,{onClick:function(){return e.requestSort("energy")},direction:e.getSortDirection("energy")},a.a.createElement(C,{name:"energy.png",isBackground:!1,alt:n.items.drop.filter.tableHead[2]})))),a.a.createElement("tbody",null,e.sortedResult.map((function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,e.stage),Object.entries(e).map((function(e,t){if("stage"!==e[0]&&"energy"!==e[0])return a.a.createElement("td",{key:t},o.rarity[e[1]])})),a.a.createElement("td",null,e.energy))}))))},E=l.b.div.withConfig({displayName:"ItemFilter__FilterContainer",componentId:"kd23d5-5"})(["display:flex;@media screen and (max-width:992px){display:block;}> div:last-child > div:first-child{justify-content:start;}"]);function O(){var e=Object(r.useContext)(f.a).pageString,t=Object(r.useState)({filterBtnValue:[],result:[]}),n=t[0],o=t[1],l=Object(r.useState)(!1),u=l[0],s=l[1];return a.a.createElement(E,null,a.a.createElement(y,{filterBtnValue:n.filterBtnValue,filterBy:function(e){if(0!==e.length){var t=m.map((function(e){var t=e.materials,n=e.trainItems,r=e.expPotions,a=Object(i.a)(e,["materials","trainItems","expPotions"]);return Object.assign({},a,{drops:t.concat(n,r)})})).filter((function(t){return e.every((function(e){var n=!1;return t.drops.forEach((function(t){if(t.id===e)return n=!0,!1})),n}))}));t=t.map((function(t){var n={stage:t.chapter+"-"+t.stage,energy:t.energy};return t.drops.forEach((function(t){e.includes(t.id)&&(n[t.id]=t.rarity)})),n})),o({filterBtnValue:e,result:t})}else o({filterBtnValue:e,result:[]})}}),a.a.createElement(c.e,{result:n.result,sortFunc:function(e,t){var n=function(e){var t=e.split("-");return 1e3*parseInt(t[0])+10*parseInt(t[1].split(" ")[0])+(t[1].includes("free")?1:0)+(t.length>2?parseInt(t[2]):0)};e.sort((function(e,r){var a,o;return"stage"===t.key?(a=n(e.stage),o=n(r.stage)):(a=e[t.key],o=r[t.key]),a<o?"asc"===t.direction?-1:1:a>o?"asc"===t.direction?1:-1:0}))},defaultSortKey:n.filterBtnValue[0],modalOpen:u,handleModalOpen:function(){return s(!0)},handleModalClose:function(){return s(!1)},modalContent:e.items.drop.filter.modal,widthConfig:{default:"calc(40% - 1rem)",1360:"calc(38% - 1rem)",992:"100%"},striped:!0},a.a.createElement(k,null)))}t.default=function(){var e=Object(r.useContext)(f.a).pageString;return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.a,{title:e.items.drop.filter.helmet.title,description:e.items.drop.filter.helmet.description}),a.a.createElement(O,null))}}}]);
//# sourceMappingURL=component---src-pages-items-drop-filter-js-30a6baabdcf74e1fea30.js.map