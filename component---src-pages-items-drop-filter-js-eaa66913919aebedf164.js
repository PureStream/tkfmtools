(self.webpackChunktkfmtools=self.webpackChunktkfmtools||[]).push([[302],{70240:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return R}});var r=n(19756),i=n(85061),a=n(67294),l=n(50009),o=n(47378),c=n(99870),s=n(17182),u=n(58683),m=n(55317),f=n(32545),d=n(42474),p=n(93670),g=n(28437),h=n(32241),y={};h.forEach((function(e){e.stages.forEach((function(t){var n=t.materials,i=t.trainItems,a=t.expPotions,l=(0,r.Z)(t,["materials","trainItems","expPotions"]);[n,i,a].forEach((function(t){t.forEach((function(t){var n=Object.assign({chapter:e.chapter,rarity:t.rarity},l);y[t.id]?y[t.id].drop.push(n):y[t.id]={drop:[n]}}))}))}))}));for(var E=1;E<11;E++)y[(500+E).toString()]={drop:[]};for(var v=1;v<3;v++)y[(900+v).toString()]={drop:[]};var k=y,b={default:"60%",1360:"62%",992:"100%"},S={en:{1360:4,992:3,768:4,624:3,0:2},"zh-TW":{1360:5,992:4,768:5,624:4,410:3,0:2}},Z=(0,l.ZP)(m.K).withConfig({displayName:"filter__StyledToggleButton",componentId:"sc-1e6kgg1-0"})(["display:flex;justify-content:center;align-items:center;font-size:.85rem;"]),C=(0,l.ZP)(f.Z).withConfig({displayName:"filter__ItemImg",componentId:"sc-1e6kgg1-1"})(["width:2.26rem;height:2.26rem;"]),I=function(e){var t=e.filterBtnValue,n=e.filterBy,r=e.clearBtnValue,i=(0,p.ZK)(),l=i.userLanguage,o=i.pageString,f=i.itemString;return a.createElement(c.hR,{widthConfig:b},a.createElement(s.Z,{title:o.items.drop.filter.itemPanelTitle,end:a.createElement(u.I,{onClick:r},g.pJ)}),a.createElement(m.Z,{type:"checkbox",value:t,onChange:n,layoutConfig:S[l]},Object.entries(k).map((function(e,t){return 0===e[1].drop.length||a.createElement(Z,{value:e[0],key:t},a.createElement(C,{name:"item_"+e[0],alt:""}),f.name[e[0]])}))))},w=(0,l.ZP)(c.Re).withConfig({displayName:"filter__ImgTh",componentId:"sc-1e6kgg1-2"})(["&:after{position:absolute;top:calc(50% - .75rem);margin-left:2rem;}"]),B=(0,l.ZP)(f.Z).withConfig({displayName:"filter__TableImg",componentId:"sc-1e6kgg1-3"})(["width:1.8rem;height:1.8rem;"]),O=function(e){var t=e.requestSort,n=e.getSortDirection,r=e.sortedResult,i=(0,p.ZK)(),l=i.pageString,o=i.itemString;return 0===r.length?a.createElement(c.Re,null,l.items.drop.filter.tableHead[1]):Object.entries(r[0]).map((function(e,r){if("stage"!==e[0]&&"energy"!==e[0])return a.createElement(w,{key:r,onClick:function(){return t(e[0])},direction:n(e[0])},a.createElement(B,{name:"item_"+e[0],alt:o.name[e[0]]}))}))},_=function(e){var t=e.requestSort,n=e.getSortDirection,r=e.sortedResult,i=(0,p.ZK)().pageString;return a.createElement("thead",null,a.createElement("tr",null,a.createElement(c.Re,{onClick:function(){return t("stage")},direction:n("stage")},i.items.drop.filter.tableHead[0]),a.createElement(O,{requestSort:t,getSortDirection:n,sortedResult:r}),a.createElement(w,{onClick:function(){return t("energy")},direction:n("energy")},a.createElement(B,{name:"energy",alt:i.items.drop.filter.tableHead[2]}))))},j=function(e){var t=e.sortedResult,n=(0,p.ZK)().itemString;return a.createElement("tbody",null,t.map((function(e,t){return a.createElement("tr",{key:t},a.createElement("td",null,e.stage),Object.entries(e).map((function(e,t){if("stage"!==e[0]&&"energy"!==e[0])return a.createElement("td",{key:t},n.rarity[e[1]])})),a.createElement("td",null,e.energy))})))},P=function(e,t){var n=function(e){var t=e.split("-");return 1e3*parseInt(t[0])+10*parseInt(t[1].split(" ")[0])+(t[1].includes("free")?1:0)+(t.length>2?parseInt(t[2]):0)};e.sort((function(e,r){var i,a;return"stage"===t.key?(i=n(e.stage),a=n(r.stage)):(i=e[t.key],a=r[t.key]),i<a?"asc"===t.direction?-1:1:i>a?"asc"===t.direction?1:-1:0}))},x=l.ZP.div.withConfig({displayName:"filter__FilterContainer",componentId:"sc-1e6kgg1-4"})(["display:flex;@media screen and (max-width:992px){display:block;}> div:last-child > div:first-child{justify-content:start;}"]),V={default:"calc(40% - 1rem)",1360:"calc(38% - 1rem)",992:"100%"},K=function(){var e=(0,p.ZK)().pageString,t=(0,a.useState)({filterBtnValue:[],data:[],isHelpModalOpen:!1}),n=t[0],l=t[1],o=function(e){var t;if(0!==e.length){var n=(t=[]).concat.apply(t,(0,i.Z)(h.map((function(e){return e.stages.map((function(t){var n=t.materials,i=t.trainItems,a=t.expPotions,l=(0,r.Z)(t,["materials","trainItems","expPotions"]);return Object.assign({},l,{drops:n.concat(i,a),chapter:e.chapter})}))})))).filter((function(t){return e.every((function(e){var n=!1;return t.drops.forEach((function(t){if(t.id===e)return n=!0,!1})),n}))}));n=n.map((function(t){var n={stage:t.chapter+"-"+t.stage,energy:t.energy};return t.drops.forEach((function(t){e.includes(t.id)&&(n[t.id]=t.rarity)})),n})),l((function(t){return Object.assign({},t,{filterBtnValue:e,data:n})}))}else l((function(t){return Object.assign({},t,{filterBtnValue:e,data:[]})}))},s=function(e){return function(){l((function(t){return Object.assign({},t,{isHelpModalOpen:e})}))}};return a.createElement(x,null,a.createElement(I,{filterBtnValue:n.filterBtnValue,filterBy:o,clearBtnValue:function(){return o([])}}),a.createElement(c.WG,{data:n.data,head:a.createElement(_,null),body:a.createElement(j,null),sortFunc:P,defaultSortKey:n.filterBtnValue[0],handleModalOpen:s(!0),widthConfig:V,striped:!0}),a.createElement(d.p2,{title:e.items.drop.filter.helpModal.title,open:n.isHelpModalOpen,onClose:s(!1),content:e.items.drop.filter.helpModal.content,ariaLabelledby:"help-modal-title",ariaDescribedby:"help-modal-description"}))},R=function(){var e=(0,p.ZK)().pageString;return a.createElement(a.Fragment,null,a.createElement(o.Z,{title:e.items.drop.filter.helmet.title,description:e.items.drop.filter.helmet.description,path:"/items/drop/filter/"}),a.createElement(K,null))}}}]);
//# sourceMappingURL=component---src-pages-items-drop-filter-js-eaa66913919aebedf164.js.map