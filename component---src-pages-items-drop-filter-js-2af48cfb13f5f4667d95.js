(self.webpackChunktkfmtools=self.webpackChunktkfmtools||[]).push([[302],{42474:function(e,t,n){"use strict";n.d(t,{DY:function(){return p},WQ:function(){return g},p2:function(){return b}});var r=n(67294),a=n(50009),o=n(21407),i=n(90494),l=n(60200),c=n(17182),u=n(1020),s=a.ZP.div.withConfig({displayName:"MyModal__StyledModal",componentId:"sc-1hhn0ws-0"})(["background-color:",";color:",";position:absolute;width:70%;height:80%;left:0;right:0;top:0;bottom:0;margin:auto;@media screen and (max-width:992px){width:80%;}@media screen and (max-width:768px){width:90%;}padding:1rem;border-radius:.25rem;border:1px solid ",";"],(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.onSurface}),(function(e){return e.theme.colors.border})),d=(0,a.ZP)(c.Z).withConfig({displayName:"MyModal__ModalHeader",componentId:"sc-1hhn0ws-1"})(["margin:-1rem;margin-bottom:1rem;padding:.2rem .5rem;background-color:",";span{color:",";}"],(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.onSecondary})),m=a.ZP.span.withConfig({displayName:"MyModal__CloseWrapper",componentId:"sc-1hhn0ws-2"})(["cursor:pointer;font-size:x-large;"]),f=function(e){var t=e.children,n=e.className,a=e.title,c=e.open,u=e.onClose,f=e.ariaLabelledby,p=e.ariaDescribedby;return r.createElement(l.Z,{className:n,open:c,onClose:u,closeAfterTransition:!0,BackdropComponent:o.Z,BackdropProps:{timeout:500},disableEnforceFocus:!0,"aria-labelledby":f,"aria-describedby":p},r.createElement(i.Z,{in:c},r.createElement(s,null,r.createElement(d,{title:a,end:r.createElement(m,{onClick:u},"Ã—")}),t)))},p=(0,a.ZP)(f).withConfig({displayName:"MyModal__FitHeightModal",componentId:"sc-1hhn0ws-3"})(["> div:nth-child(3){top:10%;bottom:auto;height:min-content;> div{max-height:calc(80vh - 2rem);}}"]),g=function(e){var t=e.children,n=e.className,a=e.title,o=e.open,i=e.onClose,l=e.ariaLabelledby,c=e.ariaDescribedby;return r.createElement(p,{className:n,title:a,open:o,onClose:i,ariaLabelledby:l,ariaDescribedby:c},r.createElement(u.Z,null,t))},h=a.ZP.div.withConfig({displayName:"MyModal__ModalBody",componentId:"sc-1hhn0ws-4"})(["margin:1rem 0;"]),y=function(e){return e.content.map((function(e,t){return r.createElement(r.Fragment,{key:t},r.createElement(c.Z,{title:e.title}),r.createElement(h,null,e.content.map((function(e,t){return r.createElement("p",{key:t},e)}))))}))},b=function(e){var t=e.title,n=e.content,a=e.open,o=e.onClose,i=e.ariaLabelledby,l=e.ariaDescribedby;return r.createElement(g,{title:t,open:a,onClose:o,ariaLabelledby:i,ariaDescribedby:l},r.createElement(y,{content:n}))};t.ZP=f},55317:function(e,t,n){"use strict";n.d(t,{K:function(){return w},Z:function(){return x}});var r=n(67294),a=n(50009),o=n(22122),i=n(19756),l=n(75900),c=n.n(l),u=n(46594),s=function(){},d=r.forwardRef((function(e,t){var n=e.children,a=e.name,l=e.className,d=e.checked,m=e.type,f=e.onChange,p=e.value,g=e.disabled,h=e.inputRef,y=(0,i.Z)(e,["children","name","className","checked","type","onChange","value","disabled","inputRef"]),b=(0,r.useState)(!1),v=b[0],C=b[1],E=(0,r.useCallback)((function(e){"INPUT"===e.target.tagName&&C(!0)}),[]),k=(0,r.useCallback)((function(e){"INPUT"===e.target.tagName&&C(!1)}),[]);return r.createElement(u.Z,(0,o.Z)({},y,{ref:t,className:c()(l,v&&"focus",g&&"disabled"),type:void 0,active:!!d,as:"label"}),r.createElement("input",{name:a,type:m,value:p,ref:h,autoComplete:"off",checked:!!d,disabled:!!g,onFocus:E,onBlur:k,onChange:f||s}),n)}));d.displayName="ToggleButton";var m=d,f=n(41143),p=n.n(f),g=n(25513),h=n(69758);var y=n(99541),b=r.forwardRef((function(e,t){var n=e.bsPrefix,a=e.size,l=e.toggle,u=e.vertical,s=e.className,d=e.as,m=void 0===d?"div":d,f=(0,i.Z)(e,["bsPrefix","size","toggle","vertical","className","as"]),p=(0,y.vE)(n,"btn-group"),g=p;return u&&(g=p+"-vertical"),r.createElement(m,(0,o.Z)({},f,{ref:t,className:c()(s,g,a&&p+"-"+a,l&&p+"-toggle")}))}));b.displayName="ButtonGroup",b.defaultProps={vertical:!1,toggle:!1,role:"group"};var v=b,C=r.forwardRef((function(e,t){var n=(0,g.Ch)(e,{value:"onChange"}),a=n.children,l=n.type,c=n.name,u=n.value,s=n.onChange,d=(0,i.Z)(n,["children","type","name","value","onChange"]),m=function(){return null==u?[]:[].concat(u)};return"radio"!==l||c||p()(!1),r.createElement(v,(0,o.Z)({},d,{ref:t,toggle:!0}),function(e,t){var n=0;return r.Children.map(e,(function(e){return r.isValidElement(e)?t(e,n++):e}))}(a,(function(e){var t=m(),n=e.props,a=n.value,o=n.onChange;return r.cloneElement(e,{type:l,name:e.name||c,checked:-1!==t.indexOf(a),onChange:(0,h.Z)(o,(function(e){return function(e,t){if(s){var n=m(),r=-1!==n.indexOf(e);"radio"!==l?s(r?n.filter((function(t){return t!==e})):[].concat(n,[e]),t):!r&&s&&s(e,t)}}(a,e)}))})})))}));C.defaultProps={type:"radio",vertical:!1},C.Button=m;var E=C,k=(0,a.ZP)(m).withConfig({displayName:"MyToggleButtonGroup__StyledToggleButton",componentId:"xb0kbi-0"})(["&&&&{padding:.15rem .15rem;border-radius:.25rem;border:1px solid ",";background-color:",";color:",";white-space:break-spaces;user-select:none;&:hover{border:1px solid ",";box-shadow:inset 0 0 .5rem ",",0 0 .1rem ",";}&.active{background-color:",";color:",";}&.focus{box-shadow:none;}}"],(function(e){return e.theme.colors.secondaryBorder}),(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.onSurface}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.onSecondary})),w=function(e){var t=e.className,n=e.children,a=e.type,o=e.checked,i=e.onChange,l=e.value;return r.createElement(k,{className:t,type:a,value:l,checked:o,onChange:i},n)},Z=(0,a.ZP)(E).withConfig({displayName:"MyToggleButtonGroup__StyledToggleButtonGroup",componentId:"xb0kbi-1"})(["display:grid;gap:.5rem;",""],(function(e){return Object.entries(e.$layoutConfig).map((function(e){return"@media screen and (min-width: "+e[0]+"px) {\n            grid-template-columns: repeat("+e[1]+", 1fr);\n        }\n        "}))}));function x(e){var t=e.children,n=e.className,a=e.type,o=e.value,i=e.onChange,l=e.layoutConfig;return r.createElement(Z,{type:a,value:o,onChange:i,$layoutConfig:l,className:n},t)}},83559:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r=n(67294),a=n(47378),o=n(19756),i=n(50009),l=n(99870),c=n(17182),u=n(58683),s=n(55317),d=n(32545),m=n(42474),f=n(93670),p=n(28437),g=n(32241),h={};g.forEach((function(e){var t=e.materials,n=e.trainItems,r=e.expPotions,a=(0,o.Z)(e,["materials","trainItems","expPotions"]);[t,n,r].forEach((function(e){e.forEach((function(e){var t=Object.assign({rarity:e.rarity},a);h[e.id]?h[e.id].drop.push(t):h[e.id]={drop:[t]}}))}))}));for(var y=1;y<11;y++)h[(500+y).toString()]={drop:[]};for(var b=1;b<3;b++)h[(900+b).toString()]={drop:[]};var v=h,C=(0,i.ZP)(s.K).withConfig({displayName:"ItemFilter__StyledToggleButton",componentId:"kd23d5-0"})(["display:flex;justify-content:center;align-items:center;font-size:.85rem;"]),E=(0,i.ZP)(d.Z).withConfig({displayName:"ItemFilter__ItemImg",componentId:"kd23d5-1"})(["width:2.26rem;height:2.26rem;"]),k=function(e){var t=e.filterBtnValue,n=e.filterBy,a=e.clearBtnValue,o=(0,r.useContext)(f.A),i=o.userLanguage,d=o.pageString,m=o.itemString;return r.createElement(l.hR,{widthConfig:{default:"60%",1360:"62%",992:"100%"}},r.createElement(c.Z,{title:d.items.drop.filter.itemPanelTitle,end:r.createElement(u.Io,{onClick:a},p.pJ)}),r.createElement(s.Z,{type:"checkbox",value:t,onChange:n,layoutConfig:{en:{1360:4,992:3,768:4,624:3,0:2},"zh-TW":{1360:5,992:4,768:5,624:4,410:3,0:2}}[i]},Object.entries(v).map((function(e,t){return 0===e[1].drop.length||r.createElement(C,{value:e[0],key:t},r.createElement(E,{name:"item_"+e[0],alt:""}),m.name[e[0]])}))))},w=(0,i.ZP)(l.Re).withConfig({displayName:"ItemFilter__ImgTh",componentId:"kd23d5-2"})(["&:after{position:absolute;top:calc(50% - .75rem);margin-left:2rem;}"]),Z=(0,i.ZP)(d.Z).withConfig({displayName:"ItemFilter__TableImg",componentId:"kd23d5-3"})(["width:1.8rem;height:1.8rem;"]),x=function(e){var t=e.requestSort,n=e.getSortDirection,a=e.sortedResult,o=(0,r.useContext)(f.A),i=o.pageString,c=o.itemString;return 0===a.length?r.createElement(l.Re,null,i.items.drop.filter.tableHead[1]):Object.entries(a[0]).map((function(e,a){if("stage"!==e[0]&&"energy"!==e[0])return r.createElement(w,{key:a,onClick:function(){return t(e[0])},direction:n(e[0])},r.createElement(Z,{name:"item_"+e[0],alt:c.name[e[0]]}))}))},N=function(e){var t=e.requestSort,n=e.getSortDirection,a=e.sortedResult,o=(0,r.useContext)(f.A).pageString;return r.createElement("thead",null,r.createElement("tr",null,r.createElement(l.Re,{onClick:function(){return t("stage")},direction:n("stage")},o.items.drop.filter.tableHead[0]),r.createElement(x,{requestSort:t,getSortDirection:n,sortedResult:a}),r.createElement(w,{onClick:function(){return t("energy")},direction:n("energy")},r.createElement(Z,{name:"energy",alt:o.items.drop.filter.tableHead[2]}))))},I=function(e){var t=e.sortedResult,n=(0,r.useContext)(f.A).itemString;return r.createElement("tbody",null,t.map((function(e,t){return r.createElement("tr",{key:t},r.createElement("td",null,e.stage),Object.entries(e).map((function(e,t){if("stage"!==e[0]&&"energy"!==e[0])return r.createElement("td",{key:t},n.rarity[e[1]])})),r.createElement("td",null,e.energy))})))},S=i.ZP.div.withConfig({displayName:"ItemFilter__FilterContainer",componentId:"kd23d5-4"})(["display:flex;@media screen and (max-width:992px){display:block;}> div:last-child > div:first-child{justify-content:start;}"]);function _(){var e=(0,r.useContext)(f.A).pageString,t=(0,r.useState)({filterBtnValue:[],data:[],isHelpModalOpen:!1}),n=t[0],a=t[1],i=function(e){if(0!==e.length){var t=g.map((function(e){var t=e.materials,n=e.trainItems,r=e.expPotions,a=(0,o.Z)(e,["materials","trainItems","expPotions"]);return Object.assign({},a,{drops:t.concat(n,r)})})).filter((function(t){return e.every((function(e){var n=!1;return t.drops.forEach((function(t){if(t.id===e)return n=!0,!1})),n}))}));t=t.map((function(t){var n={stage:t.chapter+"-"+t.stage,energy:t.energy};return t.drops.forEach((function(t){e.includes(t.id)&&(n[t.id]=t.rarity)})),n})),a((function(n){return Object.assign({},n,{filterBtnValue:e,data:t})}))}else a((function(t){return Object.assign({},t,{filterBtnValue:e,data:[]})}))},c=function(e){return function(){a((function(t){return Object.assign({},t,{isHelpModalOpen:e})}))}};return r.createElement(S,null,r.createElement(k,{filterBtnValue:n.filterBtnValue,filterBy:i,clearBtnValue:function(){return i([])}}),r.createElement(l.WG,{data:n.data,head:r.createElement(N,null),body:r.createElement(I,null),sortFunc:function(e,t){var n=function(e){var t=e.split("-");return 1e3*parseInt(t[0])+10*parseInt(t[1].split(" ")[0])+(t[1].includes("free")?1:0)+(t.length>2?parseInt(t[2]):0)};e.sort((function(e,r){var a,o;return"stage"===t.key?(a=n(e.stage),o=n(r.stage)):(a=e[t.key],o=r[t.key]),a<o?"asc"===t.direction?-1:1:a>o?"asc"===t.direction?1:-1:0}))},defaultSortKey:n.filterBtnValue[0],handleModalOpen:c(!0),widthConfig:{default:"calc(40% - 1rem)",1360:"calc(38% - 1rem)",992:"100%"},striped:!0}),r.createElement(m.p2,{title:e.items.drop.filter.helpModal.title,open:n.isHelpModalOpen,onClose:c(!1),content:e.items.drop.filter.helpModal.content,ariaLabelledby:"help-modal-title",ariaDescribedby:"help-modal-description"}))}var P=function(){var e=(0,r.useContext)(f.A).pageString;return r.createElement(r.Fragment,null,r.createElement(a.Z,{title:e.items.drop.filter.helmet.title,description:e.items.drop.filter.helmet.description,path:"/items/drop/filter/"}),r.createElement(_,null))}}}]);
//# sourceMappingURL=component---src-pages-items-drop-filter-js-2af48cfb13f5f4667d95.js.map