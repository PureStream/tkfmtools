(self.webpackChunktkfmtools=self.webpackChunktkfmtools||[]).push([[781],{37700:function(e,t,a){"use strict";a.d(t,{v:function(){return k},Z:function(){return Z}});var n=a(85061),i=a(19756),r=a(67294),o=a(50009),l=a(7408),s=a(53013),c=a(99870),d=a(17182),p=a(47478),u=a(42474),m=a(93670),h=a(28437),b=a(20601),g=function(e){var t=e.handleSelect,a=e.potentialMaxNum,n=e.potentialSubMinNum,i=e.disciplineDisabled,o=e.starMinNum,c=(0,r.useContext)(m.A).pageString;return r.createElement(r.Fragment,null,r.createElement(s.Z.Row,null,r.createElement(l.Z,null,c.characters.stats.levelTitle),r.createElement(l.Z,null,c.characters.stats.starTitle)),r.createElement(s.Z.Row,null,r.createElement(l.Z,null,r.createElement(p.Ph,{type:"number",min:"1",max:"60",onChange:t("level"),placeholder:1})),r.createElement(p.kg,{as:l.Z,minNum:o,maxNum:5,onChange:t("star")})),r.createElement(p.HX,{title:c.characters.stats.potentialTitle,subMinNum:n,minNum:1,maxNum:a,selectAttrs:["potential","potentialSub"],handleSelect:t}),c.characters.stats.disciplineTitle,r.createElement(s.Z.Row,null,r.createElement(p.kg,{as:l.Z,minNum:0,maxNum:3,disabled:i,onChange:t("discipline")})))},f=(0,o.ZP)(c.hR).withConfig({displayName:"CharStats__StyledPanel",componentId:"b8v22b-0"})(["@media screen and (max-width:992px){width:",";margin-left:calc(100% - ",");position:relative;margin-top:1rem;}"],(function(e){return e.widthConfig[992]}),(function(e){return e.widthConfig[992]})),y=o.ZP.div.withConfig({displayName:"CharStats__BodyContainer",componentId:"b8v22b-1"})(["display:flex;flex-direction:column;"]),v=o.ZP.div.withConfig({displayName:"CharStats__StatsWrapper",componentId:"b8v22b-2"})(["margin:1.5rem .5rem;svg{width:1.2rem;height:1.2rem;margin-right:.2rem;fill:",";}"],(function(e){return e.theme.colors.onSurface})),S=function(e){var t=e.widthConfig,a=e.result,n=(0,r.useContext)(m.A).pageString,i=(0,r.useState)(!1),o=i[0],l=i[1];return r.createElement(f,{widthConfig:t},r.createElement(d.Z,{title:n.characters.stats.resultTitle,withHelp:!0,onClickHelp:function(){return l(!0)}}),r.createElement(y,null,r.createElement(v,null,h.dR,"ATK: "+a.ATK),r.createElement(v,null,h.If,"HP: "+a.HP)),r.createElement(u.p2,{title:n.characters.stats.helpModal.title,open:o,onClose:function(){return l(!1)},content:n.characters.stats.helpModal.content,ariaLabelledby:"help-modal-title",ariaDescribedby:"help-modal-description"}))},x=o.ZP.div.withConfig({displayName:"CharStats__CalculatorContainer",componentId:"b8v22b-3"})(["display:table;width:100%;> div{display:table-cell;}@media screen and (max-width:992px){display:block;> div{display:block;}}"]),C=(0,o.ZP)(p.Le).withConfig({displayName:"CharStats__StyledCharPanel",componentId:"b8v22b-4"})(["width:35%;@media screen and (max-width:992px){width:100%;}"]),w=o.ZP.div.withConfig({displayName:"CharStats__TableGutter",componentId:"b8v22b-5"})(["width:1rem;@media screen and (max-width:992px){display:hidden;}"]),E={default:"calc(65% - 1rem)",992:"100%"},k=function(e,t,a,n,i,r,o,l){var s=Math.pow(1.1,t-1),c=(0,p.Vn)(e,[1,0],[a,n]).buff,d=1+.05*i,u=(r+5)/(9-e[0]);return{ATK:Math.floor(o*s*(1+c.ATK/100)*d*u),HP:Math.floor(l*s*(1+c.HP/100)*d*u)}};function Z(){var e=(0,r.useState)({character:"101",level:1,potential:1,potentialSub:0,discipline:0,star:3,result:{ATK:920,HP:3476}}),t=e[0],a=e[1],o=function(e){return function(r){var o,l=r.target.value,s=Object.assign({},t,((o={})[e]="character"===e?l:parseInt(l),o));if(isNaN(parseInt(s.level))||s.level<0||s.level>60)a((function(e){return Object.assign({},e,{level:1,result:{ATK:"-",HP:"-"}})}));else{"4"!==s.character[0]&&"3"!==s.character[0]||(t.potential>6&&(s.potential=1),"4"===s.character[0]&&(s.discipline=0)),1!==s.potential&&0===t.potentialSub&&(s.potentialSub=1),4-s.character[0]>t.star&&(s.star=4-s.character[0]);var c=b.find((function(e){return e.id===s.character})).stats,d=c.initATK,p=c.initHP,u=(s.result,(0,i.Z)(s,["result"]));s.result=k.apply(void 0,(0,n.Z)(Object.values(u)).concat([d,p])),a(s)}}};return r.createElement(x,{resultPanelWidthConfig:E},r.createElement(C,{handleSelect:o,character:t.character},r.createElement(g,{handleSelect:o,potentialSubMinNum:1===t.potential?0:1,potentialMaxNum:"4"===t.character[0]||"3"===t.character[0]?6:12,disciplineDisabled:"4"===t.character[0],starMinNum:4-t.character[0]})),r.createElement(w,null),r.createElement(S,{widthConfig:E,result:t.result}))}},35618:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return B}});var n=a(19756),i=a(85061),r=a(67294),o=a(50009),l=a(81253),s=a(22122),c=a(85505),d=a(34621),p=a(37595),u=a(67055),m=a(81664),h=r.forwardRef((function(e,t){var a=e.children,n=e.classes,i=e.className,o=e.color,d=void 0===o?"default":o,p=e.component,h=void 0===p?"button":p,b=e.disabled,g=void 0!==b&&b,f=e.disableElevation,y=void 0!==f&&f,v=e.disableFocusRipple,S=void 0!==v&&v,x=e.endIcon,C=e.focusVisibleClassName,w=e.fullWidth,E=void 0!==w&&w,k=e.size,Z=void 0===k?"medium":k,N=e.startIcon,O=e.type,I=void 0===O?"button":O,P=e.variant,_=void 0===P?"text":P,T=(0,l.Z)(e,["children","classes","className","color","component","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"]),z=N&&r.createElement("span",{className:(0,c.Z)(n.startIcon,n["iconSize".concat((0,m.Z)(Z))])},N),M=x&&r.createElement("span",{className:(0,c.Z)(n.endIcon,n["iconSize".concat((0,m.Z)(Z))])},x);return r.createElement(u.Z,(0,s.Z)({className:(0,c.Z)(n.root,n[_],i,"inherit"===d?n.colorInherit:"default"!==d&&n["".concat(_).concat((0,m.Z)(d))],"medium"!==Z&&[n["".concat(_,"Size").concat((0,m.Z)(Z))],n["size".concat((0,m.Z)(Z))]],y&&n.disableElevation,g&&n.disabled,E&&n.fullWidth),component:h,disabled:g,focusRipple:!S,focusVisibleClassName:(0,c.Z)(n.focusVisible,C),ref:t,type:I},T),r.createElement("span",{className:n.label},z,a,M))})),b=(0,d.Z)((function(e){return{root:(0,s.Z)({},e.typography.button,{boxSizing:"border-box",minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow","border"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:(0,p.U1)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}},"&$disabled":{color:e.palette.action.disabled}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},text:{padding:"6px 8px"},textPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,p.U1)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},textSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,p.U1)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlined:{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.type?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),"&$disabled":{border:"1px solid ".concat(e.palette.action.disabledBackground)}},outlinedPrimary:{color:e.palette.primary.main,border:"1px solid ".concat((0,p.U1)(e.palette.primary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.primary.main),backgroundColor:(0,p.U1)(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},outlinedSecondary:{color:e.palette.secondary.main,border:"1px solid ".concat((0,p.U1)(e.palette.secondary.main,.5)),"&:hover":{border:"1px solid ".concat(e.palette.secondary.main),backgroundColor:(0,p.U1)(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{border:"1px solid ".concat(e.palette.action.disabled)}},contained:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&:hover":{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},"&$focusVisible":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}},containedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},containedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disableElevation:{boxShadow:"none","&:hover":{boxShadow:"none"},"&$focusVisible":{boxShadow:"none"},"&:active":{boxShadow:"none"},"&$disabled":{boxShadow:"none"}},focusVisible:{},disabled:{},colorInherit:{color:"inherit",borderColor:"currentColor"},textSizeSmall:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},textSizeLarge:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},outlinedSizeSmall:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},outlinedSizeLarge:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},containedSizeSmall:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},containedSizeLarge:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},sizeSmall:{},sizeLarge:{},fullWidth:{width:"100%"},startIcon:{display:"inherit",marginRight:8,marginLeft:-4,"&$iconSizeSmall":{marginLeft:-2}},endIcon:{display:"inherit",marginRight:-4,marginLeft:8,"&$iconSizeSmall":{marginRight:-2}},iconSizeSmall:{"& > *:first-child":{fontSize:18}},iconSizeMedium:{"& > *:first-child":{fontSize:20}},iconSizeLarge:{"& > *:first-child":{fontSize:22}}}}),{name:"MuiButton"})(h),g=a(7408),f=a(53013),y=a(47378),v=a(32545),S=a(47478),x=a(37700),C=a(17182),w=a(44988),E=a(42474),k=a(93670),Z=a(20601),N=(0,i.Z)(Array(5)).map((function(e){return[]}));Z.forEach((function(e,t){N[e.tags.position-5].push({id:e.id,idx:t})}));var O=function(e){return e.map((function(e){return Object.values(e)}))},I=(0,o.ZP)(f.Z).withConfig({displayName:"analysis__StyledForm",componentId:"sc-3odedp-0"})(["width:12rem;div{margin-bottom:.2rem;}> div:last-child > div{margin-bottom:0;}"]),P=o.ZP.div.withConfig({displayName:"analysis__StyledCharContainer",componentId:"sc-3odedp-1"})(["display:flex;flex-direction:row;margin-bottom:2rem;margin-right:2rem;"]),_=(0,o.ZP)(v.Z).withConfig({displayName:"analysis__CharImgWrapper",componentId:"sc-3odedp-2"})(["width:7rem;margin-right:.6rem;"]),T=function(e){var t=e.character,a=e.state,n=e.handleSelect,i=(0,r.useContext)(k.A),o=i.pageString,l=i.charString;return r.createElement(P,null,r.createElement(_,{name:"char_small_"+t.id,alt:l.name[t.id]}),r.createElement(I,{onSubmit:function(e){return e.preventDefault()}},r.createElement(f.Z.Row,null,r.createElement(g.Z,null,o.analysis.index.levelTitle),r.createElement(g.Z,null,o.analysis.index.starTitle),r.createElement(g.Z,null,o.analysis.index.disciplineTitle)),r.createElement(f.Z.Row,null,r.createElement(g.Z,null,r.createElement(S.Ph,{type:"number",value:a.level,min:"0",max:"60",onChange:n("level"),placeholder:"-"})),r.createElement(S.kg,{as:g.Z,defaultValue:a.star,minNum:4-t.id[0],maxNum:5,onChange:n("star")}),r.createElement(S.kg,{as:g.Z,defaultValue:a.discipline,minNum:0,maxNum:3,disabled:"4"===t.id[0],onChange:n("discipline")})),r.createElement(S.HX,{title:o.analysis.index.potentialTitle,defaultValues:[a.potential,a.potentialSub],subMinNum:1===a.potential?0:1,minNum:1,maxNum:"4"===t.id[0]||"3"===t.id[0]?6:12,selectAttrs:["potential","potentialSub"],handleSelect:n})))},z=o.ZP.span.withConfig({displayName:"analysis__BtnWrapper",componentId:"sc-3odedp-3"})(["&& > button{padding:.4rem .6rem;margin-right:.6rem;background-color:",";color:",";}> button:hover{box-shadow:inset 0 0 10rem 10rem rgba(255,255,255,0.25);}"],(function(e){return"save"===e.$type?e.theme.colors.success:"load"===e.$type?e.theme.colors.blue:e.theme.colors.error}),(function(e){return"save"===e.$type?e.theme.colors.onSuccess:"load"===e.$type?e.theme.colors.onBlue:e.theme.colors.onError})),M=function(e){var t=e.children,a=e.type,n=e.onClick;return r.createElement(z,{$type:a},r.createElement(b,{onClick:n},t))},A=o.ZP.div.withConfig({displayName:"analysis__DataButtonContainer",componentId:"sc-3odedp-4"})(["position:absolute;right:0;top:-.6rem;margin-bottom:0;> span:last-child button{margin:0;}"]),R=function(e){var t=e.handleData,a=e.handleModalOpen,n=(0,r.useContext)(k.A).pageString;return r.createElement(A,null,r.createElement(M,{type:"save",onClick:t("save")},n.analysis.index.saveButton),r.createElement(M,{type:"load",onClick:a},n.analysis.index.loadButton))},H=(0,o.ZP)(C.Z).withConfig({displayName:"analysis__ModalItemContainer",componentId:"sc-3odedp-5"})(["border:none;"]),j=function(e){var t=e.handleData,a=(0,r.useContext)(k.A).pageString,n=localStorage.getItem("analysis-data");return(n?JSON.parse(n):[]).map((function(e,n){return r.createElement(H,{title:e.date,end:r.createElement(r.Fragment,null,r.createElement(M,{type:"load",onClick:t("load",n)},a.analysis.index.loadButton),r.createElement(M,{type:"delete",onClick:t("delete",n)},a.analysis.index.deleteButton)),key:n})}))},D=o.ZP.div.withConfig({displayName:"analysis__CharGroupsContainer",componentId:"sc-3odedp-6"})(["width:100%;> div:nth-child(even) > div span{display:flex;align-items:center;margin-bottom:.4rem;}"]),$=(0,o.ZP)(v.Z).withConfig({displayName:"analysis__UiImgWrapper",componentId:"sc-3odedp-7"})(["width:2rem;margin-right:.2rem;"]),L=o.ZP.div.withConfig({displayName:"analysis__CharsContainer",componentId:"sc-3odedp-8"})(["display:flex;flex-direction:row;flex-wrap:wrap;"]),B=function(e){var t=e.pageState,a=e.handlePageState,o=(0,r.useContext)(k.A),l=o.pageString,s=o.charString,c=(0,r.useState)({data:Z.map((function(e){return{id:e.id,attribute:e.tags.attribute,position:e.tags.position-5,level:1,potential:1,potentialSub:0,discipline:0,star:e.rarity,ATK:e.stats.initATK,HP:e.stats.initHP,owned:!0}})),isDataModalOpen:!1,isHelpModalOpen:!1,isSuccessSnackbarOpen:!1,isErrorSnackbarOpen:!1}),d=c[0],p=c[1];(0,r.useEffect)((function(){t&&p((function(e){return Object.assign({},e,{data:t})}))}),[]);var u=function(e){return function(t){return function(r){var o,l=parseInt(r.target.value),s=Object.assign({},d.data[e],((o={})[t]=parseInt(l),o));if(!(isNaN(parseInt(s.level))||s.level<0||s.level>60)){1!==s.potential&&0===d.data[e].potentialSub&&(s.potentialSub=1);var c=Z[e].stats,u=(s.rarity,s.attribute,s.position,s.ATK,s.HP,s.owned,(0,n.Z)(s,["rarity","attribute","position","ATK","HP","owned"])),m=x.v.apply(void 0,(0,i.Z)(Object.values(u)).concat((0,i.Z)(Object.values(c)))),h=d.data.slice();h[e]=Object.assign({},s,m,{owned:!0}),p((function(e){return Object.assign({},e,{data:h})})),a(h)}}}},m=function(e,n){return function(){var i=localStorage.getItem("analysis-data");if("save"===e&&t){var r=6e4*(new Date).getTimezoneOffset(),o=new Date(Date.now()-r).toISOString().slice(0,10);if(i){var l=JSON.parse(i);l.push({date:o,data:O(d.data)}),localStorage.setItem("analysis-data",JSON.stringify(l)),p((function(e){return Object.assign({},e,{isSuccessSnackbarOpen:!0})}))}else localStorage.setItem("analysis-data",JSON.stringify([{date:o,data:O(d.data)}])),p((function(e){return Object.assign({},e,{isSuccessSnackbarOpen:!0})}));dataLayer&&dataLayer.push({event:"line_up_analysis",line_up:O(d.data)})}else{if("load"===e){if(i){var s=JSON.parse(i);if(s[n]&&"101"===s[n].data[0][0]){var c=function(e){var t=["id","attribute","position","level","potential","potentialSub","discipline","star","ATK","HP","owned"];return e.map((function(e){return e.reduce((function(e,a,n){return e[t[n]]=a,e}),{})}))}(s[n].data);return p((function(e){return Object.assign({},e,{data:c,isSuccessSnackbarOpen:!0,isDataModalOpen:!1})})),void a(c)}}}else if("delete"===e&&i){var u=JSON.parse(i);if(u[n]&&"101"===u[n].data[0][0])return u.splice(n,1),localStorage.setItem("analysis-data",JSON.stringify(u)),void p((function(e){return Object.assign({},e,{isDataModalOpen:!0})}))}p((function(e){return Object.assign({},e,{isErrorSnackbarOpen:!0})}))}}},h=function(e){return function(){p((function(t){return Object.assign({},t,{isDataModalOpen:e})}))}},b=function(e){return function(){p((function(t){return Object.assign({},t,{isHelpModalOpen:e})}))}},g=["attacker","defender","healer","obsructer","supporter"];return r.createElement(D,null,r.createElement(y.Z,{title:l.analysis.index.helmet.title,description:l.analysis.index.helmet.description,path:"/analysis/"}),r.createElement(R,{handleData:m,handleModalOpen:h(!0)}),N.map((function(e,t){return r.createElement(r.Fragment,{key:t},r.createElement(C.Z,{title:s.tags[t+5],titleIcon:r.createElement($,{name:"ui_"+g[t],alt:""}),withHelp:0===t,onClickHelp:b(!0)}),r.createElement(L,null,e.map((function(e,t){return r.createElement(T,{character:e,state:d.data[e.idx],handleSelect:u(e.idx),key:t})}))))})),r.createElement(w.Z,{open:d.isSuccessSnackbarOpen,onClose:function(){return function(){p((function(e){return Object.assign({},e,{isSuccessSnackbarOpen:!1})}))}},message:l.analysis.index.successMsg,type:"success"}),r.createElement(w.Z,{open:d.isErrorSnackbarOpen,onClose:function(){p((function(e){return Object.assign({},e,{isErrorSnackbarOpen:!1})}))},message:l.analysis.index.errorMsg,type:"error"}),r.createElement(E.WQ,{title:l.analysis.index.modalTitle,open:d.isDataModalOpen,onClose:h(!1),ariaLabelledby:"load-data-modal-title",ariaDescribedby:"load-data-modal-description"},r.createElement(j,{handleData:m})),r.createElement(E.p2,{title:l.analysis.index.helpModal.title,content:l.analysis.index.helpModal.content,open:d.isHelpModalOpen,onClose:b(!1),ariaLabelledby:"help-modal-title",ariaDescribedby:"help-modal-description"}))}}}]);
//# sourceMappingURL=component---src-pages-analysis-index-js-a8ce1e7ca7eacb0cd6bb.js.map