{"version":3,"sources":["webpack://tkfmtools/./node_modules/react-bootstrap/esm/Table.js","webpack://tkfmtools/./src/components/FilterComponents.js","webpack://tkfmtools/./src/components/MyCard.js","webpack://tkfmtools/./src/components/MyForm.js","webpack://tkfmtools/./src/gamedata/calcCharStats.js","webpack://tkfmtools/./src/components/CharSelectPanel.js","webpack://tkfmtools/./src/pages/characters/potential.js"],"names":["Table","_ref","ref","bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive","props","decoratedBsPrefix","classes","table","responsiveClass","StyledFilterPanel","styled","widthConfig","default","theme","colors","surface","border","FilterPanel","children","SortableTh","onSurface","direction","undefined","StyledTable","$border","secondary","SortableTable","data","head","body","sortFunc","defaultSortKey","items","config","key","useState","sortConfig","setSortConfig","sortedResult","useMemo","sortableItems","requestSort","useSortableData","useEffect","React","getSortDirection","length","ResultTableContainer","TableWrapper","ScrollableContainer","StyledSortableTable","ResultTable","handleModalOpen","pageString","useLanguage","title","drop","filter","resultTitle","withHelp","onClickHelp","StyledImg","ImageSupplier","ImgWrapper","ImgCard","imgType","imgId","alt","isBackground","name","ItemImg","TextWrapper","ItemCard","id","itemString","CardTable","StyledForm","Form","Select","NumForm","as","minNum","maxNum","onChange","defaultValue","disabled","value","Array","keys","slice","map","i","TwoStageForm","handleSelect","subMinNum","selectAttrs","defaultValues","Col","charData","require","potentialData","calcCharPotential","char","from","to","result","money","buff","ATK","HP","PASSIVE","type","find","c","potentialType","stages","stage","j","pattern","rank","num","itemMap","parsedItem","parseInt","toString","Object","entries","module","exports","character","level","potential","potentialSub","discipline","star","initATK","initHP","levelBuff","disciplineBuff","starBuff","Math","floor","CharForm","CharContainer","CharImgWrapper","lumpNRChars","charString","992","MyHeader","characters","characterPanelTitle","titleIcon","RaceIcon","onSubmit","event","preventDefault","characterSelectTitle","idx","rarity","nr","MaterialWrapper","$layoutConfig","entry","UiImg","UiImgWrapper","layoutConfig","MaterialCard","MaterialBox","item","StyledPanel","MaterialContainer","resultLayoutConfig","1360","1200","768","0","624","ResultPanel","userLanguage","resultDemandTitle","ItemIcon","resultBuffTitle","BuffIcon","CalculatorContainer","TableGutter","FormGutter","resultPanelWidthConfig","CharPotential","currStage","currSub","targetStage","targetSub","isHelpModalOpen","state","setState","attr","newState","selected","target","max","round","maxStage","handelHelpModal","boolean","currentSelectTitle","targetSelectTitle","helpModal","open","onClose","content","ariaLabelledby","ariaDescribedby","Head","helmet","description","path"],"mappings":"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","file":"component---src-pages-characters-potential-js-27f20400ac9095761836.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","import React, { useEffect, useMemo, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Table } from 'react-bootstrap';\r\nimport ScrollableContainer from 'components/ScrollableContainer';\r\nimport MyHeader from 'components/MyHeader';\r\nimport { useLanguage } from 'components/LanguageProvider';\r\n\r\nconst StyledFilterPanel = styled.div`\r\n    height: 100%;\r\n    width: ${props => props.widthConfig.default};\r\n    padding: 1rem;\r\n    border-radius: .25rem;\r\n    background-color: ${props => props.theme.colors.surface};\r\n    border: 1px solid ${props => props.theme.colors.border};\r\n    box-shadow: 0 0 .15em lightgray;\r\n    @media screen and (max-width: 1360px) {\r\n        width: ${props => props.widthConfig[1360]};\r\n    }\r\n    @media screen and (max-width: 992px) {\r\n        width: ${props => props.widthConfig[992]};\r\n    }\r\n`\r\nexport const FilterPanel = ({\r\n    className,\r\n    children,\r\n    widthConfig\r\n}) => (\r\n    <StyledFilterPanel\r\n        className={className}\r\n        widthConfig={widthConfig}\r\n    >\r\n        {children}\r\n    </StyledFilterPanel>\r\n)\r\n\r\nexport const SortableTh = styled.th`\r\n    cursor: pointer;\r\n    user-select: none;\r\n    background-color: ${props => props.theme.colors.surface};\r\n    color: ${props => props.theme.colors.onSurface};\r\n    &:after {\r\n        content: '${props => (\r\n        props.direction\r\n            ? props.direction === 'asc'\r\n                ? ' \\\\25B2'\r\n                : ' \\\\25BC'\r\n            : undefined\r\n    )}';\r\n    }\r\n`\r\nconst StyledTable = styled(Table)`\r\n    width: 100%;\r\n    margin-bottom: 0;\r\n    th {\r\n        position: sticky;\r\n        top: 0;\r\n        z-index: 1;\r\n    }\r\n    &, &&& tr {\r\n        color: ${props => props.theme.colors.onSurface};\r\n    }\r\n    th {\r\n        padding: .75rem .25rem;\r\n    }\r\n    th:first-child {\r\n        padding-left: .75rem;\r\n    }\r\n    td {\r\n        vertical-align: middle;\r\n    }\r\n    tr {\r\n        border-bottom: ${props => (\r\n        props.$border\r\n            ? '1px solid ' + props.theme.colors.secondary\r\n            : 'none'\r\n    )};\r\n    }\r\n`\r\nexport const SortableTable = ({\r\n    className,\r\n    data,\r\n    head,\r\n    body,\r\n    sortFunc,\r\n    defaultSortKey,\r\n    striped,\r\n    border\r\n}) => {\r\n    const useSortableData = (\r\n        items, config = {\r\n            key: defaultSortKey,\r\n            direction: 'desc'\r\n        }\r\n    ) => {\r\n        const [sortConfig, setSortConfig] = useState(config)\r\n\r\n        const sortedItems = useMemo(() => {\r\n            let sortableItems = [...items]\r\n            if (sortConfig.key) {\r\n                sortFunc(sortableItems, sortConfig)\r\n            }\r\n\r\n            return sortableItems\r\n        }, [items, sortConfig])\r\n\r\n        const requestSort = (key) => {\r\n            let direction = (\r\n                sortConfig.key === key &&\r\n                sortConfig.direction === 'desc'\r\n            ) ? 'asc' : 'desc'\r\n            setSortConfig({ key, direction })\r\n        }\r\n\r\n        return { sortedResult: sortedItems, requestSort, sortConfig }\r\n    }\r\n\r\n    const { sortedResult, requestSort, sortConfig } = useSortableData(data)\r\n\r\n    // apply default key if value assigned after first render\r\n    useEffect(() => {\r\n        if (sortConfig.key !== defaultSortKey) {\r\n            requestSort(defaultSortKey)\r\n        }\r\n    }, [defaultSortKey])\r\n\r\n    const getSortDirection = (key) => (\r\n        !data || data.length === 0 || sortConfig.key !== key\r\n            ? undefined\r\n            : sortConfig.direction\r\n    )\r\n\r\n    return (\r\n        <StyledTable\r\n            className={className}\r\n            striped={striped}\r\n            borderless\r\n            hover\r\n            $border={border}\r\n            size=\"sm\"\r\n        >\r\n            {React.cloneElement(head, {\r\n                requestSort: requestSort,\r\n                getSortDirection: getSortDirection,\r\n                sortedResult: sortedResult,\r\n            })}\r\n            {React.cloneElement(body, {\r\n                sortedResult: sortedResult,\r\n            })}\r\n        </StyledTable>\r\n    )\r\n}\r\n\r\nconst ResultTableContainer = styled.div`\r\n    vertical-align: top;\r\n    position: absolute;\r\n    width: ${props => props.widthConfig.default};\r\n    margin-left: calc(100% - ${props => props.widthConfig.default});\r\n    padding: 1rem;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    border-radius: .25rem;\r\n    background-color: ${props => props.theme.colors.surface};\r\n    border: 1px solid ${props => props.theme.colors.border};\r\n    box-shadow: 0 0 .15em lightgray;\r\n    @media screen and (max-width: 1360px) {\r\n        width: ${props => props.widthConfig[1360]};\r\n        margin-left: calc(100% - ${props => props.widthConfig[1360]});\r\n    }\r\n    @media screen and (max-width: 992px) {\r\n        width: ${props => props.widthConfig[992]};\r\n        margin-left: calc(100% - ${props => props.widthConfig[992]});\r\n        position: relative;\r\n        margin-top: 1rem;\r\n    }\r\n`\r\nconst TableWrapper = styled(ScrollableContainer)`\r\n    height: calc(100% - 1.4rem - 1.5rem);\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n`\r\nconst StyledSortableTable = styled(SortableTable)`\r\n    img {\r\n        width: 1.8rem; height: 1.8rem;\r\n    }\r\n    td {\r\n        padding-left: .75rem;\r\n    }\r\n`\r\nexport function ResultTable({\r\n    data,\r\n    head,\r\n    body,\r\n    sortFunc,\r\n    defaultSortKey,\r\n    handleModalOpen,\r\n    widthConfig,\r\n    striped,\r\n}) {\r\n    const { pageString } = useLanguage()\r\n\r\n    return (\r\n        <ResultTableContainer widthConfig={widthConfig}>\r\n            <MyHeader\r\n                title={pageString.items.drop.filter.resultTitle}\r\n                withHelp\r\n                onClickHelp={handleModalOpen}\r\n            />\r\n            <TableWrapper>\r\n                <StyledSortableTable\r\n                    data={data}\r\n                    head={head}\r\n                    body={body}\r\n                    sortFunc={sortFunc}\r\n                    defaultSortKey={defaultSortKey}\r\n                    striped={striped}\r\n                >\r\n                </StyledSortableTable>\r\n            </TableWrapper>\r\n        </ResultTableContainer>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { Table } from 'react-bootstrap';\r\nimport ImageSupplier from 'components/ImageSupplier';\r\nimport { useLanguage } from 'components/LanguageProvider';\r\n\r\nconst StyledImg = styled(ImageSupplier)`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    width: 100%;\r\n    background-repeat: no-repeat;\r\n`\r\nconst ImgWrapper = styled.div`\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n`\r\nexport const ImgCard = ({\r\n    children,\r\n    className,\r\n    imgType,\r\n    imgId,\r\n    alt,\r\n    isBackground\r\n}) => (\r\n    isBackground\r\n        ? <StyledImg\r\n            className={className}\r\n            name={`${imgType}_${imgId}`}\r\n            isBackground\r\n            alt={alt}\r\n        >\r\n            {children}\r\n        </StyledImg>\r\n        : <ImgWrapper className={className}>\r\n            <StyledImg\r\n                name={`${imgType}_${imgId}`}\r\n                alt={alt}\r\n            />\r\n            {children}\r\n        </ImgWrapper>\r\n)\r\n\r\nconst ItemImg = styled(ImgCard)`\r\n    > div:first-child {\r\n        width: 2.5rem;\r\n        height: 2.5rem;\r\n        margin-right: .4rem;\r\n        user-select: none;\r\n    }\r\n`\r\nconst TextWrapper = styled.div`\r\n    white-space: nowrap;\r\n    font-size: medium;\r\n    font-weight: normal;\r\n`\r\nexport const ItemCard = ({\r\n    className,\r\n    id\r\n}) => {\r\n    const { itemString } = useLanguage()\r\n\r\n    return (\r\n        <ItemImg\r\n            className={className}\r\n            imgType='item'\r\n            imgId={id}\r\n            alt=''\r\n        >\r\n            <TextWrapper>\r\n                {itemString.name[id]}\r\n            </TextWrapper>\r\n        </ItemImg>\r\n    )\r\n}\r\n\r\nconst StyledTable = styled(Table)`\r\n    font-size: .9rem;\r\n    color: ${props => props.theme.colors.onSurface};\r\n    margin: 0;\r\n    > tbody > tr > {\r\n        td:first-child {\r\n            padding-left: .75rem;\r\n        }\r\n    }\r\n`\r\nexport const CardTable = ({\r\n    className,\r\n    children,\r\n    striped\r\n}) => (\r\n    <StyledTable\r\n        className={className}\r\n        striped={striped}\r\n        borderless\r\n        size=\"sm\"\r\n    >\r\n        {children}\r\n    </StyledTable>\r\n)\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { Col, Form } from 'react-bootstrap';\r\n\r\nexport const StyledForm = styled(Form)`\r\n    form {\r\n        > div:last-child > div {\r\n            margin-bottom: 0;\r\n        }\r\n    }\r\n`\r\n\r\nexport const Select = styled(Form.Control)`\r\n    && {\r\n        background-color: ${props => props.theme.colors.surface};\r\n        color: ${props => props.theme.colors.onSurface};\r\n        border-radius: .25rem;\r\n        padding: .1rem;\r\n        border: 1px solid ${props => props.theme.colors.secondary};\r\n        width: 100%;\r\n        height: 1.6rem;\r\n        &:focus {\r\n            box-shadow: 0 0 .4rem ${props => props.theme.colors.secondary};\r\n        }\r\n    }\r\n`\r\n\r\nexport const NumForm = ({\r\n    as,\r\n    minNum,\r\n    maxNum,\r\n    onChange,\r\n    defaultValue,\r\n    disabled\r\n}) => (\r\n    <Form.Group as={as}>\r\n        <Select\r\n            as=\"select\"\r\n            value={defaultValue}\r\n            onChange={onChange}\r\n            disabled={disabled}\r\n        >\r\n            {disabled\r\n                ? <option>-</option>\r\n                : [...Array(maxNum + 1).keys()].slice(minNum)\r\n                    .map(i => <option value={i} key={i}>{i}</option>)}\r\n        </Select>\r\n    </Form.Group>\r\n)\r\n\r\nexport const TwoStageForm = ({\r\n    title,\r\n    handleSelect,\r\n    subMinNum,\r\n    minNum,\r\n    maxNum,\r\n    selectAttrs,\r\n    defaultValues,\r\n    disabled\r\n}) => (\r\n    <>\r\n        {title}\r\n        <Form.Row>\r\n            <NumForm\r\n                as={Col}\r\n                minNum={minNum}\r\n                maxNum={maxNum}\r\n                onChange={handleSelect(selectAttrs[0])}\r\n                defaultValue={defaultValues ? defaultValues[0] : undefined}\r\n                disabled={disabled}\r\n            />\r\n            {'–'}\r\n            <NumForm\r\n                as={Col}\r\n                minNum={subMinNum}\r\n                maxNum={6}\r\n                onChange={handleSelect(selectAttrs[1])}\r\n                defaultValue={defaultValues ? defaultValues[1] : undefined}\r\n                disabled={disabled}\r\n            />\r\n        </Form.Row>\r\n    </>\r\n)\r\n","const charData = require('./character.json');\r\nconst potentialData = require('./potential.json');\r\n\r\nconst calcCharPotential = function (char, from, to) {\r\n    const result = {\r\n        items: {},\r\n        money: 0,\r\n        buff: {\r\n            ATK: 0,\r\n            HP: 0,\r\n            PASSIVE: 0\r\n        },\r\n    }\r\n    const type = (char === 'nr' || char[0] === '4' || char[0] === '3')\r\n        ? 3\r\n        : charData.find(c => c.id === char).potentialType\r\n\r\n    const stages = potentialData.type[type]\r\n    for (let i = from[0] - 1; i < to[0] - 1 + 1; i++) {\r\n        let stage = stages[i]\r\n        for (\r\n            let j = i === from[0] - 1 ? from[1] - 1 : 0;\r\n            j < (i === to[0] - 1 ? to[1] : 6);\r\n            j++\r\n        ) {\r\n            if (j < 0) continue\r\n\r\n            let id = stage.pattern[j] + stage.rank[j]\r\n            if (result.items[id]) {\r\n                result.items[id] += stage.num[j]\r\n            } else {\r\n                result.items[id] = stage.num[j]\r\n            }\r\n            result.money += (i + 1) * 8000\r\n            let buff = potentialData.itemMap[stage.pattern[j]].type\r\n            result.buff[buff] += stage.buff[j]\r\n        }\r\n    }\r\n    // parse result\r\n    let parsedItem = {}\r\n    for (const [key, value] of Object.entries(result.items)) {\r\n        let itemId = potentialData.itemMap[key[0]].id.map(id => (\r\n            key[1] === '9' ? '902'\r\n                : key[1] === '8' ? '901'\r\n                    : (parseInt(key[1]) * 100 + id).toString()\r\n        ))\r\n        for (let i of itemId) {\r\n            if (parsedItem[i]) {\r\n                parsedItem[i] += value\r\n            } else {\r\n                parsedItem[i] = value\r\n            }\r\n        }\r\n    }\r\n\r\n    result.items = parsedItem\r\n    return result\r\n}\r\n\r\nconst calcCharStats = function (\r\n    character,\r\n    level,\r\n    potential,\r\n    potentialSub,\r\n    discipline,\r\n    star,\r\n    initATK,\r\n    initHP\r\n) {\r\n    if (!character) {\r\n        return\r\n    }\r\n    \r\n    const levelBuff = 1.1 ** (level - 1)\r\n    const { buff } = calcCharPotential(\r\n        character,\r\n        [1, 0],\r\n        [potential, potentialSub]\r\n    )\r\n    const disciplineBuff = 1 + discipline * .05\r\n    const starBuff = (star + 5) / (9 - character[0])\r\n\r\n    return ({\r\n        ATK: Math.floor(initATK * levelBuff * (1 + buff.ATK / 100) * disciplineBuff * starBuff),\r\n        HP: Math.floor(initHP * levelBuff * (1 + buff.HP / 100) * disciplineBuff * starBuff)\r\n    })\r\n}\r\n\r\nmodule.exports = calcCharStats\r\nmodule.exports.calcCharPotential = calcCharPotential","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { Col, Form } from 'react-bootstrap';\r\nimport { FilterPanel } from 'components/FilterComponents';\r\nimport MyHeader from 'components/MyHeader';\r\nimport ImageSupplier from 'components/ImageSupplier';\r\nimport { Select, StyledForm } from 'components/MyForm';\r\nimport { useLanguage } from 'components/LanguageProvider';\r\nimport { RaceIcon } from 'components/icon';\r\nimport charData from 'gamedata/character.json';\r\n\r\nconst CharForm = styled(StyledForm)`\r\n    form {\r\n        width: 13.5rem;\r\n    }\r\n`\r\nconst CharContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-around;\r\n`\r\nconst CharImgWrapper = styled(ImageSupplier)`\r\n    width: 5.1rem;\r\n    margin-right: 1rem;\r\n    border: 2px solid ${props => props.theme.colors.secondary};\r\n    border-radius: .25rem;\r\n`\r\nconst CharSelectPanel = ({\r\n    children,\r\n    className,\r\n    character,\r\n    handleSelect,\r\n    lumpNRChars,\r\n}) => {\r\n    const { pageString, charString } = useLanguage()\r\n\r\n    const widthConfig = {\r\n        default: '25%',\r\n        992: '100%',\r\n    }\r\n\r\n    return (\r\n        <FilterPanel\r\n            widthConfig={widthConfig}\r\n            className={className}\r\n        >\r\n            <MyHeader\r\n                title={pageString.characters.potential.characterPanelTitle}\r\n                titleIcon={RaceIcon}\r\n            />\r\n            <CharContainer>\r\n                <CharImgWrapper\r\n                    name={`char_${character}`}\r\n                    alt=''\r\n                />\r\n                <CharForm onSubmit={(event) => event.preventDefault()}>\r\n                    {pageString.characters.potential.characterSelectTitle}\r\n                    <Form.Row>\r\n                        <Form.Group as={Col}>\r\n                            <Select\r\n                                as=\"select\"\r\n                                onChange={handleSelect('character')}\r\n                            >\r\n                                {charData.map((char, idx) => {\r\n                                    if (char.rarity < 2 && lumpNRChars) {\r\n                                        return false\r\n                                    }\r\n\r\n                                    return (\r\n                                        <option value={char.id} key={idx}>\r\n                                            {charString.name[char.id]}\r\n                                        </option>\r\n                                    )\r\n                                })}\r\n                                {lumpNRChars &&\r\n                                    <option value={'nr'} key={'nr'}>\r\n                                        {charString.name.nr}\r\n                                    </option>}\r\n                            </Select>\r\n                        </Form.Group>\r\n                    </Form.Row>\r\n                    {children}\r\n                </CharForm>\r\n            </CharContainer>\r\n        </FilterPanel >\r\n    )\r\n}\r\n\r\nexport default CharSelectPanel","import React, { useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport Head from 'components/Head';\r\nimport CharSelectPanel from 'components/CharSelectPanel';\r\nimport { FilterPanel } from 'components/FilterComponents';\r\nimport MyHeader from 'components/MyHeader';\r\nimport { ItemCard } from 'components/MyCard';\r\nimport ImageSupplier from 'components/ImageSupplier';\r\nimport { TwoStageForm } from 'components/MyForm';\r\nimport { TextModal } from 'components/MyModal';\r\nimport { useLanguage } from 'components/LanguageProvider';\r\nimport { BuffIcon, ItemIcon } from 'components/icon';\r\nimport { calcCharPotential } from 'gamedata/calcCharStats';\r\n\r\nconst MaterialWrapper = styled.span`\r\n    display: inline-flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 0 .4rem;\r\n    margin: .2rem 0;\r\n    ${props => Object.entries(props.$layoutConfig).map(entry => (\r\n    `@media screen and (min-width: ${entry[0]}px) {\r\n            width: calc(100% / ${entry[1]});\r\n        }\r\n        `\r\n))}\r\n    > div {\r\n        display: flex;\r\n        align-items: center;\r\n    }\r\n`\r\nconst UiImg = styled(ImageSupplier)`\r\n    width: 1.6rem;\r\n    height: 1.6rem;\r\n    margin-right: .4rem;\r\n`\r\nconst UiImgWrapper = ({\r\n    children,\r\n    layoutConfig,\r\n    name,\r\n    alt\r\n}) => (\r\n    <MaterialWrapper\r\n        $layoutConfig={layoutConfig}\r\n    >\r\n        <div>\r\n            <UiImg\r\n                name={name}\r\n                alt={alt}\r\n            />\r\n            {children}\r\n        </div>\r\n    </MaterialWrapper>\r\n)\r\n\r\nconst MaterialCard = styled(ItemCard)`\r\n    > div:first-child {\r\n        width: 2rem;\r\n        height: 2rem;\r\n        margin-right: .4rem;\r\n    }\r\n`\r\nconst MaterialBox = ({\r\n    result,\r\n    layoutConfig\r\n}) => (\r\n    <>\r\n        {result.items &&\r\n            Object.entries(result.items).map((item, idx) => (\r\n                <MaterialWrapper\r\n                    key={idx}\r\n                    $layoutConfig={layoutConfig}\r\n                >\r\n                    <div>\r\n                        <MaterialCard\r\n                            id={item[0]}\r\n                            alt=''\r\n                        />\r\n                    </div>\r\n                    {item[1]}\r\n                </MaterialWrapper>\r\n            ))}\r\n        {result.items && result.money &&\r\n            <UiImgWrapper\r\n                name='money'\r\n                alt='money'\r\n                layoutConfig={layoutConfig}\r\n            >\r\n                {result.money}\r\n            </UiImgWrapper>}\r\n    </>\r\n)\r\n\r\nconst StyledPanel = styled(FilterPanel)`\r\n    @media screen and (max-width: 992px) {\r\n        width: ${props => props.widthConfig[992]};\r\n        margin-left: calc(100% - ${props => props.widthConfig[992]});\r\n        position: relative;\r\n        margin-top: 1rem;\r\n    }\r\n`\r\nconst MaterialContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    flex-wrap: wrap;\r\n    margin-bottom: 1rem;\r\n    min-height: 6rem;\r\n`\r\nconst resultLayoutConfig = {\r\n    'en': {\r\n        1360: 5,\r\n        1200: 4,\r\n        768: 3,\r\n        0: 2\r\n    },\r\n    'zh-TW': {\r\n        1360: 6,\r\n        1200: 5,\r\n        768: 4,\r\n        624: 3,\r\n        0: 2\r\n    }\r\n}\r\n\r\nconst ResultPanel = ({\r\n    widthConfig,\r\n    result,\r\n    handleModalOpen\r\n}) => {\r\n    const { userLanguage, pageString } = useLanguage()\r\n\r\n    return (\r\n        <StyledPanel widthConfig={widthConfig}>\r\n            <div>\r\n                <MyHeader\r\n                    title={pageString.characters.potential.resultDemandTitle}\r\n                    titleIcon={ItemIcon}\r\n                    withHelp\r\n                    onClickHelp={handleModalOpen}\r\n                />\r\n                <MaterialContainer>\r\n                    <MaterialBox\r\n                        result={result}\r\n                        layoutConfig={resultLayoutConfig[userLanguage]}\r\n                    />\r\n                </MaterialContainer>\r\n            </div>\r\n            <div>\r\n                <MyHeader\r\n                    title={pageString.characters.potential.resultBuffTitle}\r\n                    titleIcon={BuffIcon}\r\n                />\r\n                <div>\r\n                    <UiImgWrapper\r\n                        layoutConfig={resultLayoutConfig[userLanguage]}\r\n                        name='ui_small_atk'\r\n                        alt='ATK'\r\n                    >\r\n                        {`${result.buff.ATK} %`}\r\n                    </UiImgWrapper>\r\n                    <UiImgWrapper\r\n                        layoutConfig={resultLayoutConfig[userLanguage]}\r\n                        name='ui_small_hp'\r\n                        alt='HP'\r\n                    >\r\n                        {`${result.buff.HP} %`}\r\n                    </UiImgWrapper>\r\n                    <UiImgWrapper\r\n                        layoutConfig={resultLayoutConfig[userLanguage]}\r\n                        name='ui_small_potentialPassive'\r\n                        alt='Passive'\r\n                    >\r\n                        {`${result.buff.PASSIVE === 0 ? '-'\r\n                            : result.buff.PASSIVE === 1 ? '1'\r\n                                : result.buff.PASSIVE === 2 ? '2'\r\n                                    : '1 & 2'\r\n                            }`}\r\n                    </UiImgWrapper>\r\n                </div>\r\n            </div>\r\n        </StyledPanel>\r\n    )\r\n}\r\n\r\nconst CalculatorContainer = styled.div`\r\n    display: table;\r\n    width: 100%;\r\n    > div {\r\n        display: table-cell;\r\n    }\r\n    @media screen and (max-width: 992px) {\r\n        display: block;\r\n        > div {\r\n            display: block; \r\n        }\r\n    }\r\n`\r\nconst TableGutter = styled.div`\r\n    width: 1rem;\r\n    @media screen and (max-width: 992px) {\r\n        display: hidden;\r\n    }\r\n`\r\nconst FormGutter = styled.div`\r\n    margin-top: 4rem;\r\n`\r\nconst resultPanelWidthConfig = {\r\n    default: 'calc(75% - 1rem)',\r\n    992: '100%',\r\n}\r\nconst CharPotential = () => {\r\n    const { pageString } = useLanguage()\r\n\r\n    const [state, setState] = useState({\r\n        character: '101',\r\n        currStage: 1,\r\n        currSub: 1,\r\n        targetStage: 1,\r\n        targetSub: 1,\r\n        result: {\r\n            items: undefined,\r\n            money: 0,\r\n            buff: {\r\n                ATK: 0,\r\n                HP: 0,\r\n                PASSIVE: 0\r\n            },\r\n        },\r\n        isHelpModalOpen: false,\r\n    })\r\n\r\n    const handleSelect = (attr) => (event) => {\r\n        let newState = { ...state }\r\n\r\n        const selected = event.target.value\r\n\r\n        newState[attr] = attr === 'character' ? selected : parseInt(selected)\r\n\r\n        // validate auto updated values\r\n        if (selected === 'nr') {\r\n            newState.currStage = state.currStage > 6 ? 1 : state.currStage\r\n            newState.targetStage = state.targetStage > 6 ? 1 : state.targetStage\r\n        }\r\n\r\n        // make sure target is always not smaller than current\r\n        newState.targetStage = Math.max(newState.targetStage, newState.currStage)\r\n        if (newState.targetStage === newState.currStage) {\r\n            newState.targetSub = Math.max(newState.targetSub, newState.currSub)\r\n        }\r\n\r\n        const result = calcCharPotential(\r\n            newState.character,\r\n            [newState.currStage, newState.currSub],\r\n            [newState.targetStage, newState.targetSub]\r\n        )\r\n\r\n        result.buff.ATK = Math.round(result.buff.ATK * 100) / 100\r\n        result.buff.HP = Math.round(result.buff.HP * 100) / 100\r\n\r\n        newState.result = result\r\n        setState(newState)\r\n    }\r\n\r\n    const maxStage = state.character === 'nr' ? 6 : 12\r\n\r\n    const handelHelpModal = (boolean) => () => {\r\n        setState((state) => ({\r\n            ...state,\r\n            isHelpModalOpen: boolean,\r\n        }))\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <CalculatorContainer\r\n                resultPanelWidthConfig={resultPanelWidthConfig}\r\n            >\r\n                <CharSelectPanel\r\n                    handleSelect={handleSelect}\r\n                    character={state.character}\r\n                    lumpNRChars\r\n                >\r\n                    <FormGutter />\r\n                    <TwoStageForm\r\n                        title={pageString.characters.potential.currentSelectTitle}\r\n                        subMinNum={1}\r\n                        minNum={1}\r\n                        maxNum={maxStage}\r\n                        selectAttrs={['currStage', 'currSub']}\r\n                        handleSelect={handleSelect}\r\n                    />\r\n                    <TwoStageForm\r\n                        title={pageString.characters.potential.targetSelectTitle}\r\n                        subMinNum={state.currStage === state.targetStage ? state.currSub : 1}\r\n                        minNum={state.currStage}\r\n                        maxNum={maxStage}\r\n                        selectAttrs={['targetStage', 'targetSub']}\r\n                        handleSelect={handleSelect}\r\n                    />\r\n                </CharSelectPanel>\r\n                <TableGutter />\r\n                <ResultPanel\r\n                    widthConfig={resultPanelWidthConfig}\r\n                    result={state.result}\r\n                    handleModalOpen={handelHelpModal(true)}\r\n                />\r\n            </CalculatorContainer>\r\n            <TextModal\r\n                title={pageString.characters.potential.helpModal.title}\r\n                open={state.isHelpModalOpen}\r\n                onClose={handelHelpModal(false)}\r\n                content={pageString.characters.potential.helpModal.content}\r\n                ariaLabelledby=\"help-modal-title\"\r\n                ariaDescribedby=\"help-modal-description\"\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nconst Potential = () => {\r\n    const { pageString } = useLanguage()\r\n\r\n    return (\r\n        <>\r\n            <Head\r\n                title={pageString.characters.potential.helmet.title}\r\n                description={pageString.characters.potential.helmet.description}\r\n                path='/characters/potential/'\r\n            />\r\n            <CharPotential />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Potential"],"sourceRoot":""}