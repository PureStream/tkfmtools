(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"/0XM":function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return I}));var a=n("q1tI"),r=n.n(a),o=n("vOnD"),i=n("wx14"),l=n("zLVn"),c=n("TSYQ"),u=n.n(c),d=n("cWnB"),s=function(){},m=r.a.forwardRef((function(e,t){var n=e.children,o=e.name,c=e.className,m=e.checked,f=e.type,p=e.onChange,g=e.value,b=e.disabled,h=e.inputRef,y=Object(l.a)(e,["children","name","className","checked","type","onChange","value","disabled","inputRef"]),v=Object(a.useState)(!1),C=v[0],E=v[1],O=Object(a.useCallback)((function(e){"INPUT"===e.target.tagName&&E(!0)}),[]),k=Object(a.useCallback)((function(e){"INPUT"===e.target.tagName&&E(!1)}),[]);return r.a.createElement(d.a,Object(i.a)({},y,{ref:t,className:u()(c,C&&"focus",b&&"disabled"),type:void 0,active:!!m,as:"label"}),r.a.createElement("input",{name:o,type:f,value:g,ref:h,autoComplete:"off",checked:!!m,disabled:!!b,onFocus:O,onBlur:k,onChange:p||s}),n)}));m.displayName="ToggleButton";var f=m,p=n("QLaP"),g=n.n(p),b=n("y8DL"),h=n("Qg85");var y=n("vUet"),v=r.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.size,o=e.toggle,c=e.vertical,d=e.className,s=e.as,m=void 0===s?"div":s,f=Object(l.a)(e,["bsPrefix","size","toggle","vertical","className","as"]),p=Object(y.a)(n,"btn-group"),g=p;return c&&(g=p+"-vertical"),r.a.createElement(m,Object(i.a)({},f,{ref:t,className:u()(d,g,a&&p+"-"+a,o&&p+"-toggle")}))}));v.displayName="ButtonGroup",v.defaultProps={vertical:!1,toggle:!1,role:"group"};var C=v,E=r.a.forwardRef((function(e,t){var n=Object(b.a)(e,{value:"onChange"}),a=n.children,o=n.type,c=n.name,u=n.value,d=n.onChange,s=Object(l.a)(n,["children","type","name","value","onChange"]),m=function(){return null==u?[]:[].concat(u)};return"radio"!==o||c||g()(!1),r.a.createElement(C,Object(i.a)({},s,{ref:t,toggle:!0}),function(e,t){var n=0;return r.a.Children.map(e,(function(e){return r.a.isValidElement(e)?t(e,n++):e}))}(a,(function(e){var t=m(),n=e.props,a=n.value,i=n.onChange;return r.a.cloneElement(e,{type:o,name:e.name||c,checked:-1!==t.indexOf(a),onChange:Object(h.a)(i,(function(e){return function(e,t){if(d){var n=m(),a=-1!==n.indexOf(e);"radio"!==o?d(a?n.filter((function(t){return t!==e})):[].concat(n,[e]),t):!a&&d&&d(e,t)}}(a,e)}))})})))}));E.defaultProps={type:"radio",vertical:!1},E.Button=f;var O=E,k=Object(o.b)(f).withConfig({displayName:"MyToggleButtonGroup__StyledToggleButton",componentId:"xb0kbi-0"})(["&&&&{padding:.15rem .15rem;border-radius:.25rem;border:1px solid ",";background-color:",";color:",";white-space:break-spaces;user-select:none;&:hover{border:1px solid ",";box-shadow:inset 0 0 .5rem ",",0 0 .1rem ",";}&.active{background-color:",";color:",";}&.focus{box-shadow:none;}}"],(function(e){return e.theme.colors.secondaryBorder}),(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.onSurface}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.onSecondary})),j=function(e){var t=e.className,n=e.children,a=e.type,o=e.checked,i=e.onChange,l=e.value;return r.a.createElement(k,{className:t,type:a,value:l,checked:o,onChange:i},n)},w=Object(o.b)(O).withConfig({displayName:"MyToggleButtonGroup__StyledToggleButtonGroup",componentId:"xb0kbi-1"})(["display:grid;gap:.5rem;",""],(function(e){return Object.entries(e.$layoutConfig).map((function(e){return"@media screen and (min-width: "+e[0]+"px) {\n            grid-template-columns: repeat("+e[1]+", 1fr);\n        }\n        "}))}));function I(e){var t=e.children,n=e.className,a=e.type,o=e.value,i=e.onChange,l=e.layoutConfig;return r.a.createElement(w,{type:a,value:o,onChange:i,$layoutConfig:l,className:n},t)}},MdAk:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return v}));var a=n("q1tI"),r=n.n(a),o=n("vOnD"),i=n("Xt1q"),l=n("+Isj"),c=n("kKU3"),u=n("yAqR"),d=n("nkBX"),s=o.b.div.withConfig({displayName:"MyModal__StyledModal",componentId:"sc-1hhn0ws-0"})(["background-color:",";color:",";position:absolute;width:70%;height:80%;left:0;right:0;top:0;bottom:0;margin:auto;@media screen and (max-width:992px){width:80%;}@media screen and (max-width:768px){width:90%;}padding:1rem;border-radius:.25rem;border:1px solid ",";"],(function(e){return e.theme.colors.surface}),(function(e){return e.theme.colors.onSurface}),(function(e){return e.theme.colors.border})),m=Object(o.b)(u.a).withConfig({displayName:"MyModal__ModalHeader",componentId:"sc-1hhn0ws-1"})(["margin:-1rem;margin-bottom:1rem;padding:.2rem .5rem;background-color:",";span{color:",";}"],(function(e){return e.theme.colors.secondary}),(function(e){return e.theme.colors.onSecondary})),f=o.b.span.withConfig({displayName:"MyModal__CloseWrapper",componentId:"sc-1hhn0ws-2"})(["cursor:pointer;font-size:x-large;"]),p=function(e){var t=e.children,n=e.className,a=e.title,o=e.open,u=e.onClose,d=e.ariaLabelledby,p=e.ariaDescribedby;return r.a.createElement(i.a,{className:n,open:o,onClose:u,closeAfterTransition:!0,BackdropComponent:l.a,BackdropProps:{timeout:500},disableEnforceFocus:!0,"aria-labelledby":d,"aria-describedby":p},r.a.createElement(c.a,{in:o},r.a.createElement(s,null,r.a.createElement(m,{title:a,end:r.a.createElement(f,{onClick:u},"Ã—")}),t)))},g=Object(o.b)(p).withConfig({displayName:"MyModal__FitHeightModal",componentId:"sc-1hhn0ws-3"})(["> div:nth-child(3){top:10%;bottom:auto;height:min-content;> div{max-height:calc(80vh - 2rem);}}"]),b=function(e){var t=e.children,n=e.className,a=e.title,o=e.open,i=e.onClose,l=e.ariaLabelledby,c=e.ariaDescribedby;return r.a.createElement(g,{className:n,title:a,open:o,onClose:i,ariaLabelledby:l,ariaDescribedby:c},r.a.createElement(d.a,null,t))},h=o.b.div.withConfig({displayName:"MyModal__ModalBody",componentId:"sc-1hhn0ws-4"})(["margin:1rem 0;"]),y=function(e){return e.content.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(u.a,{title:e.title}),r.a.createElement(h,null,e.content.map((function(e,t){return r.a.createElement("p",{key:t},e)}))))}))},v=function(e){var t=e.title,n=e.content,a=e.open,o=e.onClose,i=e.ariaLabelledby,l=e.ariaDescribedby;return r.a.createElement(b,{title:t,open:a,onClose:o,ariaLabelledby:i,ariaDescribedby:l},r.a.createElement(y,{content:n}))};t.c=p},exLy:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),r=n.n(a),o=n("k2JI"),i=n("zLVn"),l=n("vOnD"),c=n("JrlI"),u=n("yAqR"),d=n("hWPg"),s=n("/0XM"),m=n("9M6+"),f=n("MdAk"),p=n("D7KU"),g=n("ckOl"),b=n("6j+L"),h={};b.forEach((function(e){var t=e.materials,n=e.trainItems,a=e.expPotions,r=Object(i.a)(e,["materials","trainItems","expPotions"]);[t,n,a].forEach((function(e){e.forEach((function(e){var t=Object.assign({rarity:e.rarity},r);h[e.id]?h[e.id].drop.push(t):h[e.id]={drop:[t]}}))}))}));for(var y=1;y<11;y++)h[(500+y).toString()]={drop:[]};for(var v=1;v<3;v++)h[(900+v).toString()]={drop:[]};var C=h,E=Object(l.b)(s.a).withConfig({displayName:"ItemFilter__StyledToggleButton",componentId:"kd23d5-0"})(["display:flex;justify-content:center;align-items:center;font-size:.85rem;"]),O=Object(l.b)(m.a).withConfig({displayName:"ItemFilter__ItemImg",componentId:"kd23d5-1"})(["width:2.26rem;height:2.26rem;"]),k=function(e){var t=e.filterBtnValue,n=e.filterBy,o=e.clearBtnValue,i=Object(a.useContext)(p.a),l=i.userLanguage,m=i.pageString,f=i.itemString;return r.a.createElement(c.a,{widthConfig:{default:"60%",1360:"62%",992:"100%"}},r.a.createElement(u.a,{title:m.items.drop.filter.itemPanelTitle,end:r.a.createElement(d.a,{onClick:o},g.i)}),r.a.createElement(s.b,{type:"checkbox",value:t,onChange:n,layoutConfig:{en:{1360:4,992:3,768:4,624:3,0:2},"zh-TW":{1360:5,992:4,768:5,624:4,410:3,0:2}}[l]},Object.entries(C).map((function(e,t){return 0===e[1].drop.length||r.a.createElement(E,{value:e[0],key:t},r.a.createElement(O,{name:"item_"+e[0]+".png",alt:""}),f.name[e[0]])}))))},j=Object(l.b)(c.d).withConfig({displayName:"ItemFilter__ImgTh",componentId:"kd23d5-2"})(["&:after{position:absolute;top:calc(50% - .75rem);margin-left:2rem;}"]),w=Object(l.b)(m.a).withConfig({displayName:"ItemFilter__TableImg",componentId:"kd23d5-3"})(["width:1.8rem;height:1.8rem;"]),I=function(e){var t=e.requestSort,n=e.getSortDirection,o=e.sortedResult,i=Object(a.useContext)(p.a),l=i.pageString,u=i.itemString;return 0===o.length?r.a.createElement(c.d,null,l.items.drop.filter.tableHead[1]):Object.entries(o[0]).map((function(e,a){if("stage"!==e[0]&&"energy"!==e[0])return r.a.createElement(j,{key:a,onClick:function(){return t(e[0])},direction:n(e[0])},r.a.createElement(w,{name:"item_"+e[0]+".png",alt:u.name[e[0]]}))}))},x=function(e){var t=e.requestSort,n=e.getSortDirection,o=e.sortedResult,i=Object(a.useContext)(p.a).pageString;return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement(c.d,{onClick:function(){return t("stage")},direction:n("stage")},i.items.drop.filter.tableHead[0]),r.a.createElement(I,{requestSort:t,getSortDirection:n,sortedResult:o}),r.a.createElement(j,{onClick:function(){return t("energy")},direction:n("energy")},r.a.createElement(w,{name:"energy.png",alt:i.items.drop.filter.tableHead[2]}))))},N=function(e){var t=e.sortedResult,n=Object(a.useContext)(p.a).itemString;return r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.stage),Object.entries(e).map((function(e,t){if("stage"!==e[0]&&"energy"!==e[0])return r.a.createElement("td",{key:t},n.rarity[e[1]])})),r.a.createElement("td",null,e.energy))})))},S=l.b.div.withConfig({displayName:"ItemFilter__FilterContainer",componentId:"kd23d5-4"})(["display:flex;@media screen and (max-width:992px){display:block;}> div:last-child > div:first-child{justify-content:start;}"]);function M(){var e=Object(a.useContext)(p.a).pageString,t=Object(a.useState)({filterBtnValue:[],data:[],isHelpModalOpen:!1}),n=t[0],o=t[1],l=function(e){if(0!==e.length){var t=b.map((function(e){var t=e.materials,n=e.trainItems,a=e.expPotions,r=Object(i.a)(e,["materials","trainItems","expPotions"]);return Object.assign({},r,{drops:t.concat(n,a)})})).filter((function(t){return e.every((function(e){var n=!1;return t.drops.forEach((function(t){if(t.id===e)return n=!0,!1})),n}))}));t=t.map((function(t){var n={stage:t.chapter+"-"+t.stage,energy:t.energy};return t.drops.forEach((function(t){e.includes(t.id)&&(n[t.id]=t.rarity)})),n})),o((function(n){return Object.assign({},n,{filterBtnValue:e,data:t})}))}else o((function(t){return Object.assign({},t,{filterBtnValue:e,data:[]})}))},u=function(e){return function(){o((function(t){return Object.assign({},t,{isHelpModalOpen:e})}))}};return r.a.createElement(S,null,r.a.createElement(k,{filterBtnValue:n.filterBtnValue,filterBy:l,clearBtnValue:function(){return l([])}}),r.a.createElement(c.b,{data:n.data,head:r.a.createElement(x,null),body:r.a.createElement(N,null),sortFunc:function(e,t){var n=function(e){var t=e.split("-");return 1e3*parseInt(t[0])+10*parseInt(t[1].split(" ")[0])+(t[1].includes("free")?1:0)+(t.length>2?parseInt(t[2]):0)};e.sort((function(e,a){var r,o;return"stage"===t.key?(r=n(e.stage),o=n(a.stage)):(r=e[t.key],o=a[t.key]),r<o?"asc"===t.direction?-1:1:r>o?"asc"===t.direction?1:-1:0}))},defaultSortKey:n.filterBtnValue[0],handleModalOpen:u(!0),widthConfig:{default:"calc(40% - 1rem)",1360:"calc(38% - 1rem)",992:"100%"},striped:!0}),r.a.createElement(f.b,{title:e.items.drop.filter.helpModal.title,open:n.isHelpModalOpen,onClose:u(!1),content:e.items.drop.filter.helpModal.content,ariaLabelledby:"help-modal-title",ariaDescribedby:"help-modal-description"}))}t.default=function(){var e=Object(a.useContext)(p.a).pageString;return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{title:e.items.drop.filter.helmet.title,description:e.items.drop.filter.helmet.description,path:"/items/drop/filter/"}),r.a.createElement(M,null))}}}]);
//# sourceMappingURL=component---src-pages-items-drop-filter-js-7adb5b6b487cac5f42ef.js.map