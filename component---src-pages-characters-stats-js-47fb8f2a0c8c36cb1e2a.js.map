{"version":3,"sources":["webpack://tkfmtools/./src/components/ChatStats.js","webpack://tkfmtools/./src/pages/characters/stats.js"],"names":["StatusForm","handleSelect","potentialMaxNum","potentialSubMinNum","disciplineDisabled","starMinNum","pageString","useContext","LanguageContext","Form","Col","characters","stats","levelTitle","starTitle","type","min","max","onChange","placeholder","as","minNum","maxNum","title","potentialTitle","subMinNum","selectAttrs","disciplineTitle","disabled","StyledPanel","styled","FilterPanel","props","widthConfig","BodyContainer","StatusWrapper","theme","colors","onSurface","ResultPanel","result","useState","modalOpen","setModalOpen","MyHeader","resultTitle","withHelp","onClickHelp","AttackIcon","ATK","HpIcon","HP","helpModal","open","onClose","content","ariaLabelledby","ariaDescribedby","CalculatorContainer","StyledCharPanel","CharSelectPanel","TableGutter","resultPanelWidthConfig","default","992","CharExp","character","level","potential","potentialSub","discipline","star","state","setState","attr","event","newState","selected","target","value","parseInt","isNaN","charData","c","id","initATK","initHP","levelBuff","buff","calcPotential","disciplineBuff","starBuff","Math","floor","Head","helmet","description","path"],"mappings":"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","file":"component---src-pages-characters-stats-js-47fb8f2a0c8c36cb1e2a.js","sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Col, Form } from 'react-bootstrap';\r\nimport { FilterPanel } from './FilterComponents';\r\nimport MyHeader from './MyHeader';\r\nimport {\r\n    calcPotential,\r\n    CharSelectPanel,\r\n    NumForm,\r\n    Select,\r\n    TwoStageForm\r\n} from './CharPotential';\r\nimport { TextModal } from './MyModal';\r\nimport { LanguageContext } from './LanguageProvider';\r\nimport { AttackIcon, HpIcon } from './icon';\r\nimport charData from 'gamedata/character.json';\r\n\r\nconst StatusForm = ({\r\n    handleSelect,\r\n    potentialMaxNum,\r\n    potentialSubMinNum,\r\n    disciplineDisabled,\r\n    starMinNum,\r\n}) => {\r\n    const { pageString } = useContext(LanguageContext)\r\n\r\n    return (\r\n        <>\r\n            <Form.Row>\r\n                <Col>\r\n                    {pageString.characters.stats.levelTitle}\r\n                </Col>\r\n                <Col>\r\n                    {pageString.characters.stats.starTitle}\r\n                </Col>\r\n            </Form.Row>\r\n            <Form.Row>\r\n                <Col>\r\n                    <Select\r\n                        type='number'\r\n                        min='1'\r\n                        max='60'\r\n                        onChange={handleSelect('level')}\r\n                        placeholder={1}\r\n                    />\r\n                </Col>\r\n                <NumForm\r\n                    as={Col}\r\n                    minNum={starMinNum}\r\n                    maxNum={5}\r\n                    onChange={handleSelect('star')}\r\n                />\r\n            </Form.Row>\r\n            <TwoStageForm\r\n                title={pageString.characters.stats.potentialTitle}\r\n                subMinNum={potentialSubMinNum}\r\n                minNum={1}\r\n                maxNum={potentialMaxNum}\r\n                selectAttrs={['potential', 'potentialSub']}\r\n                handleSelect={handleSelect}\r\n            />\r\n            {pageString.characters.stats.disciplineTitle}\r\n            <Form.Row>\r\n                <NumForm\r\n                    as={Col}\r\n                    minNum={0}\r\n                    maxNum={3}\r\n                    disabled={disciplineDisabled}\r\n                    onChange={handleSelect('discipline')}\r\n                />\r\n            </Form.Row>\r\n        </>\r\n    )\r\n}\r\n\r\nconst StyledPanel = styled(FilterPanel)`\r\n    @media screen and (max-width: 992px) {\r\n        width: ${props => props.widthConfig[992]};\r\n        margin-left: calc(100% - ${props => props.widthConfig[992]});\r\n        position: relative;\r\n        margin-top: 1rem;\r\n    }\r\n`\r\nconst BodyContainer = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n`\r\nconst StatusWrapper = styled.div`\r\n    margin: 1.5rem .5rem;\r\n    svg {\r\n        width: 1.2rem;\r\n        height: 1.2rem;\r\n        margin-right: .2rem;\r\n        fill: ${props => props.theme.colors.onSurface}; \r\n    }\r\n`\r\nconst ResultPanel = ({\r\n    widthConfig,\r\n    result\r\n}) => {\r\n    const { pageString } = useContext(LanguageContext)\r\n\r\n    const [modalOpen, setModalOpen] = useState(false)\r\n\r\n    return (\r\n        <StyledPanel widthConfig={widthConfig}>\r\n            <MyHeader\r\n                title={pageString.characters.stats.resultTitle}\r\n                withHelp\r\n                onClickHelp={() => setModalOpen(true)}\r\n            />\r\n            <BodyContainer>\r\n                <StatusWrapper>\r\n                    {AttackIcon}{`ATK: ${result.ATK}`}\r\n                </StatusWrapper>\r\n                <StatusWrapper>\r\n                    {HpIcon}{`HP: ${result.HP}`}\r\n                </StatusWrapper>\r\n            </BodyContainer>\r\n            <TextModal\r\n                title={pageString.characters.stats.helpModal.title}\r\n                open={modalOpen}\r\n                onClose={() => setModalOpen(false)}\r\n                content={pageString.characters.stats.helpModal.content}\r\n                ariaLabelledby=\"help-modal-title\"\r\n                ariaDescribedby=\"help-modal-description\"\r\n            />\r\n        </StyledPanel>\r\n    )\r\n}\r\n\r\nconst CalculatorContainer = styled.div`\r\n    display: table;\r\n    width: 100%;\r\n    > div {\r\n        display: table-cell;\r\n    }\r\n    @media screen and (max-width: 992px) {\r\n        display: block;\r\n        > div {\r\n            display: block; \r\n        }\r\n    }\r\n`\r\nconst StyledCharPanel = styled(CharSelectPanel)`\r\n    width: 35%;\r\n    @media screen and (max-width: 992px) {\r\n        width: 100%;\r\n    }\r\n`\r\nconst TableGutter = styled.div`\r\n    width: 1rem;\r\n    @media screen and (max-width: 992px) {\r\n        display: hidden;\r\n    }\r\n`\r\nconst resultPanelWidthConfig = {\r\n    default: 'calc(65% - 1rem)',\r\n    992: '100%',\r\n}\r\n\r\nexport default function CharExp() {\r\n    const [state, setState] = useState({\r\n        character: '101',\r\n        level: 1,\r\n        potential: 1,\r\n        potentialSub: 0,\r\n        discipline: 0,\r\n        star: 3,\r\n        result: {\r\n            ATK: 920,\r\n            HP: 3476,\r\n        }\r\n    })\r\n\r\n    const handleSelect = (attr) => (event) => {\r\n        let newState = { ...state }\r\n        const selected = event.target.value\r\n        newState[attr] = attr === 'character' ? selected : parseInt(selected)\r\n\r\n        if (isNaN(parseInt(newState.level)) || newState.level < 0 || newState.level > 60) {\r\n            setState((state) => ({\r\n                ...state,\r\n                level: 1,\r\n                result: {\r\n                    ATK: '-',\r\n                    HP: '-',\r\n                }\r\n            }))\r\n\r\n            return\r\n        }\r\n\r\n        // validate auto updated values\r\n        if (newState.character[0] === '4' || newState.character[0] === '3') {\r\n            if (state.potential > 6) {\r\n                newState.potential = 1\r\n            }\r\n\r\n            if (newState.character[0] === '4') {\r\n                newState.discipline = 0\r\n            }\r\n        }\r\n        if (newState.potential !== 1 && state.potentialSub === 0) {\r\n            newState.potentialSub = 1\r\n        }\r\n        if (4 - newState.character[0] > state.star) {\r\n            newState.star = 4 - newState.character[0]\r\n        }\r\n\r\n        // calculate status\r\n        const { initATK, initHP } = charData.find(c => c.id === newState.character).stats\r\n        const levelBuff = 1.1 ** (newState.level - 1)\r\n        const { buff } = calcPotential(\r\n            newState.character,\r\n            [1, 0],\r\n            [newState.potential, newState.potentialSub]\r\n        )\r\n        const disciplineBuff = 1 + newState.discipline * .05\r\n        const starBuff = (newState.star + 5) / (9 - newState.character[0])\r\n\r\n        newState.result = {\r\n            ATK: Math.floor(initATK * levelBuff * (1 + buff.ATK / 100) * disciplineBuff * starBuff),\r\n            HP: Math.floor(initHP * levelBuff * (1 + buff.HP / 100) * disciplineBuff * starBuff)\r\n        }\r\n\r\n        setState(newState)\r\n    }\r\n\r\n    return (\r\n        <CalculatorContainer resultPanelWidthConfig={resultPanelWidthConfig}>\r\n            <StyledCharPanel\r\n                handleSelect={handleSelect}\r\n                character={state.character}\r\n            >\r\n                <StatusForm\r\n                    handleSelect={handleSelect}\r\n                    potentialSubMinNum={state.potential === 1 ? 0 : 1}\r\n                    potentialMaxNum={state.character[0] === '4' || state.character[0] === '3'\r\n                        ? 6 : 12}\r\n                    disciplineDisabled={state.character[0] === '4'}\r\n                    starMinNum={4 - state.character[0]}\r\n                />\r\n            </StyledCharPanel>\r\n            <TableGutter />\r\n            <ResultPanel\r\n                widthConfig={resultPanelWidthConfig}\r\n                result={state.result}\r\n            />\r\n        </CalculatorContainer>\r\n    )\r\n}","import React, { useContext } from 'react';\r\nimport Head from 'components/Head';\r\nimport ChatStats from 'components/ChatStats';\r\nimport { LanguageContext } from 'components/LanguageProvider';\r\n\r\nconst Stats = () => {\r\n    const { pageString } = useContext(LanguageContext)\r\n\r\n    return (\r\n        <>\r\n            <Head\r\n                title={pageString.characters.stats.helmet.title}\r\n                description={pageString.characters.stats.helmet.description}\r\n                path='/characters/stats/'\r\n            />\r\n            <ChatStats />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Stats"],"sourceRoot":""}